<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on September, 24 2010 by texi2html 1.70 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<head>
<title>ORM Lite Package: 5. Using With Android</title>

<meta name="description" content="ORM Lite Package: 5. Using With Android">
<meta name="keywords" content="ORM Lite Package: 5. Using With Android">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.70">
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="NOD23"></a>
<a name="SEC22"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="ormlite_4.html#SEC21" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_6.html#SEC23" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite_4.html#SEC21" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_6.html#SEC23" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC34" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 5. Using With Android </h1>


<p>Because of the lack of support for JDBC in Android OS, ORMLite makes direct calls to the Android database APIs
to access SQLite databases.  You should make sure that you have downloaded and are depending on the
<code>ormlite-android.jar</code> file and <em>not</em> the <code>ormlite-jdbc.jar</code> version.  This part of the code is the
newest and although tested and used in some projects, the proper patterns on <em>how</em> to use it have not solidified.
Feedback on this would be most welcome.

</p><p>After you have read the getting started section (see section <a href="ormlite_1.html#SEC1">Getting Started</a>), the following instructions should be
followed to help you get ORMLite working under Android OS.

</p><ol>
<li><p> You will need to create your own database helper class which should probably extend the <code>OrmLiteSqliteOpenHelper</code>  
class.  This class creates and upgrades the database when your app is installed and can also provide the DAO classes
used by your other classes.  Your helper class must implement the methods
<code>onCreate(SQLiteDatabase sqliteDatabase, ConnectionSource connectionSource)</code> and
<code>onUpgrade(SQLiteDatabase database, ConnectionSource connectionSource, int oldVersion, int newVersion)</code>.
<code>onCreate</code> creates the database when your app is first installed while <code>onUpgrade</code> handles the upgrading
of the database tables when you upgrade your app to a new version.  There is a sample <code>DatabaseHelper</code> class in the
<code>com.j256.ormlite.android.examples</code> section of the tests in the <code>ormlite-android-sources.jar</code> source jar file
and they can also be found here: <a href="http://ormlite.sourceforge.net/android/examples/">http://ormlite.sourceforge.net/android/examples/</a>. 

</p></li><li><p> The helper can be kept open across all activities in your app with the same Sqlite database connection reused by
all threads.  If you open multiple connections to the same database, stale data and unexpected results may occur.
We recommend using the <code>OpenHelperManager</code> to monitor the usage of the helper - it will create it on the first
access, track each time a part of your code is using it, and then it will close the last time the helper is released.

</p></li><li><p> The <code>OpenHelperManager</code> will by default look for the full class name of your own database helper class
in the <code>open_helper_classname</code> value defined in <code>res/values/strings.xml</code>.  You can instead set a
<code>SqliteOpenHelperFactory</code> on the manager directly in a <code>static {}</code> block in your code.   

</p></li><li><p>  Once you have defined your database helper and are managing it correctly, you will need to use it in your <code>Activity</code>
classes.  An easy way to use the <code>OpenHelperManager</code> is to extend <code>OrmLiteBaseActivity</code> for each of your
activity classes - there is also <code>OrmLiteBaseService</code> and <code>OrmLiteBaseTabActivity</code>.  These classes provide a
<code>getHelper()</code> method to access the database helper whenever it is needed and will automatically release the helper
in the <code>onDestroy()</code> method.  There is a sample <code>HelloAndroid</code> activity class in the the sample section of the tests 
and on the web site along with a <code>SampleData</code> example class.

</p></li><li><p> If you do not want to extend the base classes then you will need to duplicate their basic functionality of calling
<code>OpenHelperManager.getHelper(Context context)</code> at the start of your code, save the helper and use it as much as 
you want, and then calling <code>OpenHelperManager.release()</code> when you are done with it.

</p></li><li><p> The Android native SQLite database type is <code>SqliteAndroidDatabaseType</code> and is used by the base classes internally.

</p></li></ol>

<p>Please see the example code posted to the website for more information: <a href="http://ormlite.sourceforge.net/android/examples/">http://ormlite.sourceforge.net/android/examples/</a>.
Again, feedback on this is welcome.

</p><hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="ormlite_4.html#SEC21" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_6.html#SEC23" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC34" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>Gray Watson</em> on <em>September, 24 2010</em> using <a href="http://texi2html.cvshome.org/"><em>texi2html 1.70</em></a>.
 </font>
 <br>

</p>
</body>
</html>
