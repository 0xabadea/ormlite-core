<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on May, 5 2011 by texi2html 1.70 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<head>
<title>ORMLite Package: 2. How to Use</title>

<meta name="description" content="ORMLite Package: 2. How to Use">
<meta name="keywords" content="ORMLite Package: 2. How to Use">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.70">
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="NOD7"></a>
<a name="SEC6"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="ormlite_1.html#SEC5" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC7" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite_1.html#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 2. How to Use </h1>

<p>This chapter goes into more detail about how to use the various features in ORMLite.

</p><table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC7">2.1 Setting Up Your Classes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 How to setup your classes to be persisted.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC11">2.2 Persisted Data Types</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Data types that can be persisted.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC12">2.3 Connection Sources</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Setting up connections to databases.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC13">2.4 Setting Up the DAOs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   How to configure the Data Access Objects.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC14">2.5 Supported Databases</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Support databases and associated notes.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC15">2.6 Tying It All Together</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Tying all of the wiring together.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC16">2.7 Table and Schema Creation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Creating tables and loading schema.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC19">2.8 Identity Columns</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            How identity fields and columns work.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC23">2.9 DAO Usage</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   Using the Data Access Objects.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC24">2.10 Indexing Fields</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            How to create indexes on fields.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC25">2.11 Issuing Raw SQL Statements</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Issuing raw database statements.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC29">2.12 Foreign Object Fields</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Fields that represent foreign objects.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC30">2.13 Foreign Collections</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Fields that are collections of foreign objects.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC31">2.14 DAO Enabled Objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Another pattern for your data classes.
</td></tr>
</table>

<hr size="6">
<a name="NOD8"></a>
<a name="SEC7"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC6" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC8" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.1 Setting Up Your Classes </h2>

<p>To setup your classes to be persisted you need to do the following things:

</p><ol>
<li><p> Add the @DatabaseTable annotation to the top of each class.  You can also use @Entity.
</p></li><li><p> Add the @DatabaseField annotation right before each field to be persisted.  You can also use @Column and others.
</p></li><li><p> Add a no-argument constructor to each class with at least package visibility.
</p></li></ol>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC8">2.1.1 Adding ORMLite Annotations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Adding the annotations to your classes.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC9">2.1.2 Using javax.persistence Annotations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Using javax.persistence annotations instead.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC10">2.1.3 Adding a No-Argument-Constructor</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               A no-argument-constructor is also required.
</td></tr>
</table>

<hr size="6">
<a name="NOD9"></a>
<a name="SEC8"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC7" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC9" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC7" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.1.1 Adding ORMLite Annotations </h3>

<p>Annotations are special code markers have have been available in Java since version 5 that provide meta information
about classes, methods, or fields.  To specify what classes and fields to store in the database, ORMLite
supports either its own annotations (<code>@DatabaseTable</code> and <code>@DatabaseField</code>) or the more standard
annotations from the <code>javax.persistence</code> package.  See section <a href="#SEC9">Using javax.persistence Annotations</a>.   Annotations are the
easiest way to configure your classes but you can also configure the class using Java code or Spring XML.
See section <a href="ormlite_5.html#SEC44">Class Configuration</a>.

</p><p>With ORMLite annotations, for each of the Java classes that you would like to persist to your SQL database, you
will need to add the <code>@DatabaseTable</code> annotation right above the <code>public class</code> line.  Each class marked with
one of these annotations will be persisted into its own database table.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseTable(tableName = &quot;accounts&quot;)
public class Account {
&hellip;
</pre></td></tr></table>
<p>The <code>@DatabaseTable</code> annotations can have an optional <code>tableName</code> argument which specifies the name of the table
that corresponds to the class.   If not specified, the class name, with normalized case, is used by default.  With the above example
each <code>Account</code> object will be persisted as a row in the <code>accounts</code> table in the database.  If the <code>tableName</code>
was not specified, the <code>account</code> table would be used instead.

</p><p>More advanced users may want to add a <code>daoClass</code> argument which specifies the class of the DAO object that will be
operating on the class.  This is used by the DaoManager to instantiate the DAO internally.  See <a href="#ANC22">DaoManager</a>.

</p><a name="IDX8"></a>
<a name="IDX9"></a>
<p>Additionally, for each of the classes, you will need to add a <code>@DatabaseField</code> annotation to each of the <em>fields</em>
in the class that are to be persisted to the database.  Each field is persisted as a column of a database row.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseTable(tableName = &quot;accounts&quot;)
public class Account {

    @DatabaseField(id = true)
    private String name;

    @DatabaseField(canBeNull = false)
    private String password;
    &hellip;
</pre></td></tr></table>
<p>In the above example, each row in the <code>accounts</code> table has 2 columns:

</p><ul>
<li><p> the <code>name</code> column which is a string and also is the database identity (id) of the row
</p></li><li><p> the <code>password</code> column, also a string which can not be null
</p></li></ul>


<p>The @DatabaseField annotation can have the following fields:

</p><dl compact="compact">
<dd>
<a name="IDX10"></a>
<a name="IDX11"></a>
<p><a name="ANC1"></a>
</p></dd>
<dt><code> columnName</code></dt>
<dd>
<p>String name of the column in the database that will hold this field. If not set then the field name, with normalized case,
is used instead.

</p><a name="IDX12"></a>
<a name="IDX13"></a>
<a name="IDX14"></a>
<p><a name="ANC2"></a>
</p></dd>
<dt><code> dataType</code></dt>
<dd>
<p>The type of the field as the DataType class.  Usually the type is taken from Java class of the field and does not need
to be specified.  This corresponds to the SQL type.  See section <a href="#SEC11">Persisted Data Types</a>.

</p><a name="IDX15"></a>
</dd>
<dt><code> defaultValue</code></dt>
<dd>
<p>String default value of the field when we are creating a new row in the table.  Default is none.

</p><a name="IDX16"></a>
<a name="IDX17"></a>
<a name="IDX18"></a>
</dd>
<dt><code> width</code></dt>
<dd>
<p>Integer width of string fields.  Some databases do not support this unfortunately.  Default for those that do is 255.

</p><a name="IDX19"></a>
<a name="IDX20"></a>
</dd>
<dt><code> canBeNull</code></dt>
<dd>
<p>Boolean whether the field can be assigned to null value. Default is true.  If set to false then you must provide a value
for this field on every object inserted into the database.

</p><a name="IDX21"></a>
<a name="IDX22"></a>
<a name="IDX23"></a>
</dd>
<dt><code> id</code></dt>
<dd>
<p>Boolean whether the field is the id field or not. Default is false. Only one field can have this set in a class. Id fields
uniquely identity a row and are required if you want to use the query, update, refresh, and delete by ID methods. Only one
of this, <code>generatedId</code>, and <code>generatedIdSequence</code> can be specified.  See section <a href="#SEC20">Fields With id</a>.

</p><a name="IDX24"></a>
<a name="IDX25"></a>
</dd>
<dt><code> generatedId</code></dt>
<dd>
<p>Boolean whether the field is an auto-generated id field. Default is false.  Only one field can have this set in a class.
This tells the database to auto-generate a corresponding id for every row inserted.  When an object with a generated-id
is created using the <code>Dao.create()</code> method, the database will generate an id for the row which will be returned and
set in the object by the create method.  Some databases require sequences for generated ids in which case the sequence
name will be auto-generated. To specify the name of the sequence use <code>generatedIdSequence</code>. Only one of this,
<code>id</code>, and <code>generatedIdSequence</code> can be specified.  See section <a href="#SEC21">Fields With generatedId</a>.

</p><a name="IDX26"></a>
<a name="IDX27"></a>
<a name="IDX28"></a>
</dd>
<dt><code> generatedIdSequence</code></dt>
<dd>
<p>String name of the sequence number to be used to generate this value.  Same as <code>generatedId</code> but you can specify the
sequence name to use.  Default is none. Only one field can have this set in a class. This is only necessary for databases
which require sequences for generated ids.  If you use generatedId instead then the code will auto-generate a sequence name.
Only one of this, <code>id</code>, and <code>generatedId</code> can be specified.  See section <a href="#SEC22">Fields With generatedIdSequence</a>.

</p><a name="IDX29"></a>
<a name="IDX30"></a>
</dd>
<dt><code> foreign</code></dt>
<dd>
<a name="IDX31"></a>
<p>Boolean setting which identifies this field as corresponding to another class that is also stored in the database.
Default is false.  The field must not be a primitive type.  The other class must have an id field (either <code>id</code>,
<code>generatedId</code>, or <code>generatedIdSequence</code>) which will be stored in this table. When an object is returned
from a query call, any foreign objects will <em>just</em> have the id field set.  See section <a href="#SEC29">Foreign Object Fields</a>.

</p><a name="IDX32"></a>
<a name="IDX33"></a>
<a name="IDX34"></a>
<a name="IDX35"></a>
</dd>
<dt><code> useGetSet</code></dt>
<dd>
<p>Boolean that says that the field should be accessed with get and set methods.  Default is false which instead uses
direct field access via Java reflection.  This may be necessary if the object you are storing has
protections around it.

</p><p><em>NOTE:</em> The name of the get method <em>must</em> match getXxx() where Xxx is the name of the field with the first
letter capitalized. The get <em>must</em> return a class which matches the field's exactly. The set method <em>must</em>
match setXxx(), have a single argument whose class matches the field's exactly, and return void.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseField(useGetSet = true)
private Integer orderCount;

public Integer getOrderCount() {
  return orderCount;
}

public void setOrderCount(Integer orderCount) {
  this.orderCount = orderCount;
}
</pre></td></tr></table>
<a name="IDX36"></a>
<a name="IDX37"></a>
<p><a name="ANC3"></a>
</p></dd>
<dt><code> unknownEnumName</code></dt>
<dd>
<p>If the field is a Java enumerated type then you can specify the name of a enumerated value which will be used if the
value of a database row is not found in the enumerated type.  If this is not specified and a database row <em>does</em>
contain an unknown name or ordinal value then a <code>SQLException</code> is thrown when the row is being read from the database.
This is useful to handle backwards compatibility when handling out-of-date database values as well as forwards
compatibility if old software is accessing up-to-date data or if you have to roll a release back.

</p><a name="IDX38"></a>
<a name="IDX39"></a>
<a name="IDX40"></a>
</dd>
<dt><code> throwIfNull</code></dt>
<dd>
<p>Boolean that tells ORMLite to throw an exception if it sees a null value in a database row and is trying to store
it in a primitive field.  By default it is false.  If it is false and the database field is null, then the value of the
primitive will be set to 0 (false, null, etc.).  This can only be used on a primitive field.

</p></dd>
<dt><code> persisted</code></dt>
<dd>
<p>Set this to be false (default true) to not store this field in the database. This is useful if you want to have
the annotation on all of your fields but turn off the writing of some of them to the database.

</p><a name="IDX41"></a>
<a name="IDX42"></a>
</dd>
<dt><code> format</code></dt>
<dd>
<p>This allows you to specify format information of a particular field.  Right now this is only appplicable for the following
types:

</p><ul>
<li><p> <code>DATE_STRING</code> for specifying the format of the date string stored in the database  
</p></li><li><p> <code>STRING_BYTES</code> for specifying the <code>Charset</code> used to encode the string as an array of bytes
</p></li></ul>


<a name="IDX43"></a>
<a name="IDX44"></a>
<p><a name="ANC4"></a>
</p></dd>
<dt><code> unique</code></dt>
<dd>
<p>Adds a constraint to the table so that this field that it has to be unique across all rows in the table.  For example, you
might have an Account class which has a generated account-id but you also want the email address to be unique across all
Accounts.  If more than one field is marked as unique in a table, then each of the fields by themselves must be unique.
For example, if you have the <code>firstName</code> and <code>lastName</code> fields, both with <code>unique=true</code> and you have &quot;Bob&quot;,
&quot;Smith&quot; in the database, you cannot insert &quot;Bob&quot;, &quot;Jones&quot; nor &quot;Kevin&quot;, &quot;Smith&quot;.

</p><p>To have more than 1 field that are each unique in <em>combination</em>, see the <code>uniqueCombo</code> setting.    You can also
use the <code>uniqueIndexName</code> to create an index for this field.  

</p><a name="IDX45"></a>
<a name="IDX46"></a>
</dd>
<dt><code> uniqueCombo</code></dt>
<dd>
<p>Adds a constraint to the table so that a combination of all fields that have <code>uniqueCombo</code> set to true has to be unique
across all rows in the table.  For example, if you have the <code>firstName</code> and <code>lastName</code> fields, both with
<code>uniqueCombo=true</code>, and you have &quot;Bob&quot;, &quot;Smith&quot; in the database, you cannot insert another &quot;Bob&quot;, &quot;Smith&quot; but you
<em>can</em> insert &quot;Bob&quot;, &quot;Jones&quot; and &quot;Kevin&quot;, &quot;Smith&quot;.

</p><p>To have fields be unique by themselves, see the <code>unique</code> setting.  You can also use the <code>uniqueIndexName</code> to
create an index for this field.  

</p><a name="IDX47"></a>
<a name="IDX48"></a>
<a name="IDX49"></a>
<p><a name="ANC5"></a>
</p></dd>
<dt><code> index</code></dt>
<dd>
<p>Boolean value (default false) to have the database add an index for this field. This will create an index with the name
columnName with a &quot;_idx&quot; suffix. To specify a specific name of the index or to index multiple fields, use the
<code>indexName</code> field.

</p><a name="IDX50"></a>
</dd>
<dt><code> uniqueIndex</code></dt>
<dd>
<p>Boolean value (default false) to have the database add a unique index for this field. Same as index but this will ensure that all of
the values in the index are unique.  If you just want to make sure of unique-ness then you can use the <code>unique</code> field instead.

</p><a name="IDX51"></a>
</dd>
<dt><code> indexName</code></dt>
<dd>
<p>String value (default none) to have the database add an index for this field with this name. You do not need to specify the index
boolean as well. To index multiple fields together in one index, each of the fields should have the same indexName value.

</p><a name="IDX52"></a>
</dd>
<dt><code> uniqueIndexName</code></dt>
<dd>
<p>String value (default none) to have the database add a unique index for this field with this name. Same as index but this will ensure
that all of the values in the index are unique.  For example, this means that you can insert <code>(&quot;pittsburgh&quot;, &quot;pa&quot;)</code> and
<code>(&quot;harrisburg&quot;, &quot;pa&quot;)</code> and <code>(&quot;pittsburgh&quot;, &quot;tx&quot;)</code> but not another <code>(&quot;pittsburgh&quot;, &quot;pa&quot;)</code>.

</p><a name="IDX53"></a>
<a name="IDX54"></a>
<p><a name="ANC6"></a>
</p></dd>
<dt><code> foreignAutoRefresh</code></dt>
<dd>
<p>Set this to be true (default false) to have a foreign field automagically refreshed when an object is queried.  This will <em>not</em>
automagically create the foreign object but when the object is queried, a separate database call will be made to load of the fields
of the foreign object via an internal DAO. The default is to just have the ID field in the object retrieved and for the caller to
call refresh on the correct DAO.

</p><p><em>NOTE:</em> This will create another DAO object internally so low memory devices may want to call refresh by hand.

</p><p><em>NOTE:</em> To protect against recursion, there are a couple of places were auto-refreshing has been limited.  If you are
auto-refreshing a class that itself has field with <code>foreignAutoRefresh</code> set to true or if you are auto-refreshing a class with
a foreign collection, in both cases the resulting field will be set to null and <em>not</em> auto-refreshed.  You can always call
refresh on the field directly if you need it.

</p><p><em>NOTE:</em> If you have an auto-refreshed field that is an object that also has an auto-refreshed field, you may want to tune the
<code>maxForeignLevel</code> value.  See below.

</p><a name="IDX55"></a>
</dd>
<dt><code> maxForeignLevel</code></dt>
<dd>
<p>This can be used to set the maximum number of levels to configure foreign objects.  For example, if you have a <code>Question</code> which
has an foreign field of the best <code>Answer</code>, and the <code>Answer</code> has an foreign field to the corresponding question, then the
configuration back and forth can get large.  This is especially a problem with auto-refreshed fields when you lookup the <code>Question</code>
it could cause an infinite loop.  By default, ORMLite only goes through 2 levels but you can decrease it to 1 (0 is not valid) or increase
it.  The higher the number the more database transactions happen when you load in your <code>Question</code>.

</p><p>In our example, the foreign fields in <code>Question</code> and <code>Answer</code> could be set to auto-refresh.  If this is true then with the
<code>maxForeignLevel</code> set to 1, when you query for a <code>Question</code>, the <code>Answer</code> field will be auto-refreshed, but the
<code>Question</code> field on the answer will <em>only</em> have its id field set.  It will not be auto-refreshed.

</p></dd>
</dl>

<hr size="6">
<a name="NOD10"></a>
<a name="SEC9"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC8" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC10" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC7" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.1.2 Using javax.persistence Annotations </h3>

<p>Instead of using the ORMLite annotations (see section <a href="#SEC8">Adding ORMLite Annotations</a>), you can use the more standard
JPA annotations from the <code>javax.persistence</code> package.  In place of the <code>@DatabaseTable</code> annotation, you can
use the <code>javax.persistence</code> <code>@Entity</code> annotation.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@Entity(name = &quot;accounts&quot;)
public class Account {
&hellip;
</pre></td></tr></table>
<p>The <code>@Entity</code> annotations can have an optional <code>name</code> argument which specifies the table name.   If not
specified, the class name with normalized case is used by default.

</p><a name="IDX56"></a>
<a name="IDX57"></a>
<a name="IDX58"></a>
<a name="IDX59"></a>
<a name="IDX60"></a>
<a name="IDX61"></a>
<a name="IDX62"></a>
<a name="IDX63"></a>
<a name="IDX64"></a>
<a name="IDX65"></a>
<p>Instead of using the <code>@DatabaseField</code> annotation on each of the fields, you can use the <code>javax.persistence</code>
annotations: <code>@Column</code>, <code>@Id</code>, <code>@GeneratedValue</code>, <code>@OneToOne</code>, and <code>@ManyToOne</code>. For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@Entity(name = &quot;accounts&quot;)
public class Account {

    @Id
    private String name;

    @Column(nullable = false)
    private String password;
    &hellip;
</pre></td></tr></table>
<p>The following <code>javax.persistence</code> annotations and fields are supported:

</p><dl compact="compact">
<dt><code> @Column</code></dt>
<dd>
<p>Specifies the field to be persisted to the database.  You can also just specify the <code>@Id</code> annotation.  The
following annotation fields are supported, the rest are ignored.

</p><dl compact="compact">
<dt><code> name</code></dt>
<dd>
<p>Used to specify the name of the associated database column.  If not provided then the field name is taken.

</p><a name="IDX66"></a>
<a name="IDX67"></a>
<a name="IDX68"></a>
</dd>
<dt><code> length</code></dt>
<dd>
<p>Specifies the length (or width) of the database field.  Maybe only applicable for Strings and only supported by
certain database types.  Default for those that do is 255.   Same as the <code>width</code> field in the
<code>@DatabaseField</code> annotation.

</p><a name="IDX69"></a>
<a name="IDX70"></a>
</dd>
<dt><code> nullable</code></dt>
<dd>
<p>Set to true to have a field not be able to be inserted into the database with a null value.  Same as the
<code>canBeNull</code> field in the <code>@DatabaseField</code> annotation.

</p><a name="IDX71"></a>
<a name="IDX72"></a>
</dd>
<dt><code> unique</code></dt>
<dd>
<p>Adds a constraint to the field that it has to be unique across all rows in the table.  Same as the
<code>unique</code> field in the <code>@DatabaseField</code> annotation.

</p></dd>
</dl>

<a name="IDX73"></a>
<a name="IDX74"></a>
<a name="IDX75"></a>
</dd>
<dt><code> @Id</code></dt>
<dd>
<p>Used to specify a field to be persisted to the database as a primary row-id.  If you want to have the id be
auto-generated, you will need to also specify the <code>@GeneratedValue</code> annotation.

</p></dd>
<dt><code> @GeneratedValue</code></dt>
<dd>
<p>Used to define an id field as having a auto-generated value.  This is only used in addition to the <code>@Id</code>
annotation.  See the <code>generatedId</code> field in the <code>@DatabaseField</code> annotation for more details.

</p></dd>
<dt><code> @OneToOne or @ManyToOne</code></dt>
<dd>
<p>Fields with these annotations are assumed to be foreign fields.  See section <a href="#SEC29">Foreign Object Fields</a>.  ORMLite does
<em>not</em> enforce the many or one relationship nor does it use any of the annotation fields.  It just uses the
existence of either of these annotations to indicate that it is a foreign object.

</p></dd>
</dl>

<p>If the <code>@Column</code> annotation is used on a field that has a unknown type then it is assumed to be a
<code>Serializable</code> type field and the object should implement <code>java.io.Serializable</code>.
See <a href="#ANC19">datatype serializable</a>.

</p><hr size="6">
<a name="NOD11"></a>
<a name="SEC10"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC9" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC11" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC7" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.1.3 Adding a No-Argument-Constructor </h3>

<p>After you have added the class and field annotations, you will also need to add a no-argument constructor with
<em>at least</em> package visibility.  When an object is returned from a query, ORMLite constructs the object
using Java reflection and a constructor needs to be called.

</p><table><tr><td>&nbsp;</td><td><pre class="example">Account() {
    // all persisted classes must define a no-arg constructor
    // with at least package visibility
}
</pre></td></tr></table>
<p>So your final example Account class with annotations and constructor would look like:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseTable(tableName = &quot;accounts&quot;)
public class Account {
    
    @DatabaseField(id = true)
    private String name;
    
    @DatabaseField(canBeNull = false)
    private String password;
    &hellip;

    Account() {
        // all persisted classes must define a no-arg constructor
        // with at least package visibility
    }
    &hellip;
}
</pre></td></tr></table>
<hr size="6">
<a name="NOD12"></a>
<a name="SEC11"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC10" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC12" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.2 Persisted Data Types </h2>

<p>The following Java types can be persisted to the database by ORMLite.  Database specific code
helps to translate between the SQL types and the database specific handling of those types.
See section <a href="ormlite_5.html#SEC45">Database Specific Code</a>.

</p><dl compact="compact">
<dd>
<a name="IDX76"></a>
<a name="IDX77"></a>
<p><a name="ANC7"></a>
</p></dd>
<dt><code> String (DataType.STRING)</code></dt>
<dd>
<p>Persisted as SQL type <code>VARCHAR</code>.  

</p><a name="IDX78"></a>
</dd>
<dt><code> String (DataType.LONG_STRING)</code></dt>
<dd>
<p>Persisted as SQL type <code>LONGVARCHAR</code> which handles longer strings.  

</p><a name="IDX79"></a>
<a name="IDX80"></a>
<a name="IDX81"></a>
<a name="IDX82"></a>
</dd>
<dt><code> String (DataType.STRING_BYTES)</code></dt>
<dd>
<p>A Java String persisted as an array of bytes (byte[]) with the SQL type <code>VARBINARY</code>.  Many databases are
Unicode compliant (MySQL/Postgres) but some are not (SQLite).  To store strings with accents or other special
characters, you may have to encode them as an array of bytes using this type.  By default the <code>Unicode</code>
<code>Charset</code> is used to convert the string to bytes and back again.  You can use the <code>format</code> field in
<code>DatabaseField</code> to specify a custom character-set to use instead for the field.  Comparison and ordering
of this type may not be possible depending on the database type.

</p><a name="IDX83"></a>
<p><a name="ANC8"></a>
</p></dd>
<dt><code> boolean or Boolean (DataType.BOOLEAN or DataType.BOOLEAN_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type <code>BOOLEAN</code>.

</p><a name="IDX84"></a>
<a name="IDX85"></a>
<p><a name="ANC9"></a>
</p></dd>
<dt><code> java.util.Date (DataType.DATE)</code></dt>
<dd>
<p>Persisted as SQL type <code>TIMESTAMP</code>.  This type automatically uses an internal <code>?</code> argument because the string
format of it is unreliable to match the database format.  See section <a href="ormlite_3.html#SEC38">Using Select Arguments</a>.  See also <code>DATE_LONG</code> and
<code>DATE_STRING</code>.

</p><p><em>NOTE:</em> This is a different class from <code>java.sql.Date</code>.

</p><p><em>NOTE:</em> Certain databases only provide seconds resolution so the milliseconds will be 0.

</p><a name="IDX86"></a>
<p><a name="ANC10"></a>
</p></dd>
<dt><code> java.util.Date (DataType.DATE_LONG)</code></dt>
<dd>
<p>You can also specify the <code>dataType</code> field to the <code>@DatabaseField</code> annotation as a <code>DataType.DATE_LONG</code>
in which case the milliseconds value of the <code>Date</code> will be stored as an LONG.  See also <code>DATE</code> and <code>DATE_STRING</code>.

</p><p><em>NOTE:</em> This is a different class from <code>java.sql.Date</code>.

</p><p><em>NOTE:</em> Certain databases only provide seconds resolution so the milliseconds will be 0.

</p><a name="IDX87"></a>
<a name="IDX88"></a>
<p><a name="ANC11"></a>
</p></dd>
<dt><code> java.util.Date (DATE_STRING)</code></dt>
<dd>
<p>You can also specify the <code>dataType</code> field to the <code>@DatabaseField</code> annotation as a <code>DataType.DATE_STRING</code>
in which case the date will be stored as a string in <code>yyyy-MM-dd HH:mm:ss.SSSSSS</code> format.  You can use the
<code>format</code> field in <code>DatabaseField</code> to set the date to another format.  See also <code>DATE</code> and <code>DATE_LONG</code>.

</p><p><em>NOTE:</em> This is a different class from <code>java.sql.Date</code>.

</p><p><em>NOTE:</em> Certain databases only provide seconds resolution so the milliseconds will be 0.

</p><p><em>NOTE:</em> Because of reentrant issues with <code>SimpleDateFormat</code>, thread locals are used to access the formatters
every time a <code>DATE_STRING</code> date is converted to/from the database.

</p><a name="IDX89"></a>
<p><a name="ANC12"></a>
</p></dd>
<dt><code> byte or Byte (DataType.BYTE or DataType.BYTE_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type <code>TINYINT</code>.

</p><a name="IDX90"></a>
<a name="IDX91"></a>
<p><a name="ANC13"></a>
</p></dd>
<dt><code> byte array (DataType.BYTE_ARRAY)</code></dt>
<dd>
<p>Array of bytes (byte[]) persisted as SQL type <code>VARBINARY</code>.  This is different from the <code>DataType.SERIALIZABLE</code> type which 
serializes an object as an array of bytes.

</p><p><em>NOTE:</em> Because of backwards compatibility, any fields that are of type <code>byte[]</code> <em>must</em> be specified as
<code>DataType.BYTE_ARRAY</code> or <code>DataType.SERIALIZABLE</code> using the <code>dataType</code> field and will not be auto-detected.
See <a href="#ANC2">DatabaseField dataType</a>.

</p><a name="IDX92"></a>
</dd>
<dt><code> char or Character (DataType.CHAR or DataType.CHAR_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type <code>CHAR</code>.

</p><p><em>NOTE:</em> If you are using Derby you should consider using a String instead since comparisons of character fields are
not allowed.

</p><a name="IDX93"></a>
<p><a name="ANC14"></a>
</p></dd>
<dt><code> short or Short (DataType.SHORT or DataType.SHORT_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type SMALLINT.

</p><a name="IDX94"></a>
<p><a name="ANC15"></a>
</p></dd>
<dt><code> int or Integer (DataType.INTEGER or DataType.INTEGER_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type <code>INTEGER</code>.

</p><a name="IDX95"></a>
<p><a name="ANC16"></a>
</p></dd>
<dt><code> long or Long (DataType.LONG or DataType.LONG_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type <code>BIGINT</code>.

</p><a name="IDX96"></a>
<p><a name="ANC17"></a>
</p></dd>
<dt><code> float or Float (DataType.FLOAT or DataType.FLOAT_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type <code>FLOAT</code>.

</p><a name="IDX97"></a>
<p><a name="ANC18"></a>
</p></dd>
<dt><code> double or Double (DataType.DOUBLE or DataType.DOUBLE_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type <code>DOUBLE</code>.

</p><a name="IDX98"></a>
<a name="IDX99"></a>
<p><a name="ANC19"></a>
</p></dd>
<dt><code> Serializable (DataType.SERIALIZABLE)</code></dt>
<dd>
<p>Persisted as SQL type <code>VARBINARY</code>.  This is a special type that serializes an object as a sequence of bytes
and then de-serializes it on the way back.  The field must be an object that implements the <code>java.io.Serializable</code>
interface.  Depending on the database type, there will be limits to the size of the object that can be stored.
This is different from the <code>DataType.BYTE_ARRAY</code> type which stores the byte array directly.

</p><p>Some databases place restrictions on this field type that it cannot be the id column in a class.  Other databases do
not allow you to query on this type of field at all.  If your database does support it, you may also have to use a
Select Argument to query for this type.  See section <a href="ormlite_3.html#SEC38">Using Select Arguments</a>.

</p><p><em>NOTE:</em> To use this type, you <em>must</em> specify <code>DataType.SERIALIZABLE</code> using the <code>dataType</code> field.  It will
not be auto-detected.  See <a href="#ANC2">DatabaseField dataType</a>.

</p><a name="IDX100"></a>
<a name="IDX101"></a>
<p><a name="ANC20"></a>
</p></dd>
<dt><code> enum or Enum (DataType.ENUM_STRING)</code></dt>
<dd>
<p>Persisted by default as the enumerated value's string <em>name</em> as a <code>VARCHAR</code> type.  The string name is the
default (and recommended over ENUM_INTEGER) because it allows you to add additional enums anywhere in the list
without worrying about having to convert data later.

</p><a name="IDX102"></a>
<p>You can also also specify an <em>unknownEnumName</em> name with the <code>@DatabaseField</code> annotation which will be
used if an unknown value is found in the database. See <a href="#ANC3">unknownEnumName</a>. 

</p><a name="IDX103"></a>
<a name="IDX104"></a>
<p><a name="ANC21"></a>
</p></dd>
<dt><code> enum or Enum (DataType.ENUM_INTEGER)</code></dt>
<dd>
<p>You specify the <code>dataType</code> field (from the <code>@DatabaseField</code> annotation) as a <code>DataType.ENUM_INTEGER</code> in
which case the <code>ordinal</code> of the enum value will be stored as an <code>INTEGER</code>.  The name (ENUM_STRING) is the
default (and recommended) because it allows you to add additional enums anywhere in the list without worrying about
having to convert data later.  If you insert (or remove) an enum from the list that is being stored as a number, then
old data will be un-persisted incorrectly.

</p><a name="IDX105"></a>
<p>You can also also specify an <em>unknownEnumName</em> name with the <code>@DatabaseField</code> annotation which will be
used if an unknown value is found in the database. See <a href="#ANC3">unknownEnumName</a>. 

</p><a name="IDX106"></a>
</dd>
<dt><code> UUID (DataType.UUID)</code></dt>
<dd>
<p>The <code>java.util.UUID</code> class persisted as a <code>VARCHAR</code> type.  It saves it as the <code>uuid.toString()</code> and used the
<code>UUID.fromString(String)</code> method to convert it back again.  You can also mark a <code>UUID</code> field as being generated-id
in which case whenever it is inserted, <code>java.util.UUID.randomUUID()</code> is called and set on the field.
See section <a href="#SEC21">Fields With generatedId</a>.

</p></dd>
</dl>

<p><em>NOTE:</em> ORMLite also supports the concept of foreign objects where the id of another object is
stored in the database.  See section <a href="#SEC29">Foreign Object Fields</a>.

</p><hr size="6">
<a name="NOD13"></a>
<a name="SEC12"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC11" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC13" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.3 Connection Sources </h2>

<p><em>NOTE:</em> With regards to connection sources, Android users should see the Android specific documentation later in the manual.
See section <a href="ormlite_4.html#SEC39">Using With Android</a>.

</p><a name="IDX107"></a>
<a name="IDX108"></a>
<a name="IDX109"></a>
<a name="IDX110"></a>
<p>To use the database and the DAO objects, you will need to configure what JDBC calls a <code>DataSource</code> (see the
<code>javax.sql.DataSource</code> class) and what ORMLite calls a <code>ConnectionSource</code>.  A <code>ConnectionSource</code> is
a factory for connections to the physical SQL database.  Here is a code example that creates a simple, single-connection
source.

</p><a name="IDX111"></a>
<a name="IDX112"></a>
<table><tr><td>&nbsp;</td><td><pre class="example">// single connection source example for a database URI
ConnectionSource connectionSource =
  new JdbcConnectionSource(&quot;jdbc:h2:mem:account&quot;);
</pre></td></tr></table>
<a name="IDX113"></a>
<a name="IDX114"></a>
<p>The package also includes the class <code>JdbcPooledConnectionSource</code> which is a relatively simple implementation of a
pooled connection source.  As database connections are released, instead of being closed, they are added to an internal
list so they can be reused at a later time.  New connections are created on demand only if there are no dormant
connections available.  <code>JdbcPooledConnectionSource</code> is also synchronized and can be used by multiple threads.  It
has settings for the maximum number of free connections before they are closed as well as a maximum age before a
connection is closed.  

</p><table><tr><td>&nbsp;</td><td><pre class="example">// pooled connection source
JdbcPooledConnectionSource connectionSource =
  new JdbcPooledConnectionSource(&quot;jdbc:h2:mem:account&quot;);
// only keep the connections open for 5 minutes
connectionSource.setMaxConnectionAgeMillis(5 * 60 * 1000);
</pre></td></tr></table>
<p>Recently (2/2011), we added a keep-alive thread which pings each of the dormant pooled connections every so often to make
sure they are valid - closing the ones that are no long good.  You can also enable the testing of the connection right before
you get a connection from the pool.  See the javadocs for more information.

</p><table><tr><td>&nbsp;</td><td><pre class="example">// change the check-every milliseconds from 30 seconds to 60
connectionSource.setCheckConnectionsEveryMillis(60 * 1000);
// for extra protection, enable the testing of connections
// right before they are handed to the user
connectionSource.setTestBeforeGet(true);
</pre></td></tr></table>
<a name="IDX115"></a>
<a name="IDX116"></a>
<a name="IDX117"></a>
<a name="IDX118"></a>
<p>There are many other, external data sources that can be used instead, including more robust and probably higher-performance
pooled connection managers. You can instantiate your own directly and wrap it in the <code>DataSourceConnectionSource</code> class
which delegates to it.

</p><a name="IDX119"></a>
<table><tr><td>&nbsp;</td><td><pre class="example">// basic Apache data source
BasicDataSource dataSource = new BasicDataSource();
dataSource.setUrl(&quot;jdbc:h2:mem:account&quot;);
// we wrap it in the DataSourceConnectionSource
ConnectionSource connectionSource = 
  new DataSourceConnectionSource(dataSource);
</pre></td></tr></table>
<a name="IDX120"></a>
<a name="IDX121"></a>
<p>When you are done with your <code>ConnectionSource</code>, you will want to call a <code>close()</code> method to close any
underlying connections.  Something like the following pattern is recommended.

</p><table><tr><td>&nbsp;</td><td><pre class="example">JdbcConnectionSource connectionSource =
    new JdbcPooledConnectionSource(&quot;jdbc:h2:mem:account&quot;);
try {
    // work with the data-source and DAOs
    &hellip;
} finally {
    connectionSource.close();
}
</pre></td></tr></table>
<p>Unfortunately, the <code>DataSource</code> interface does not have a close method so if you are using the <code>DataSourceConnectionSource</code>
you will have to close the underlying <code>DataSource</code> by hand - the <code>close()</code> method on the <code>DataSourceConnectionSource</code>
does <em>nothing</em>.

</p><hr size="6">
<a name="NOD14"></a>
<a name="SEC13"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC12" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC14" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.4 Setting Up the DAOs </h2>

<p>Once you have annotated your classes and defined your <code>ConnectionSource</code> you will need to create the Data Access Object
(DAO) class(es), each of which will handle all database operations for a single persisted class.  Each DAO has two generic parameters:
the class we are persisting with the DAO, and the class of the ID-column that will be used to identify a specific database row.  If
your class does not have an ID field, you can put <code>Object</code> or <code>Void</code> as the 2nd argument.  For example, in the above
<code>Account</code> class, the &quot;name&quot; field is the ID column (id = true) so the ID class is <code>String</code>.

</p><p><a name="ANC22"></a>
The simplest way to create your DAO is to use the <code>createDao</code> static method on the <code>DaoManager</code> class to create a
DAO class.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">Dao&lt;Account, String&gt; accountDao =
  DaoManager.createDao(connectionSource, Account.class);
Dao&lt;Order, Integer&gt; orderDao =
  DaoManager.createDao(connectionSource, Order.class);
</pre></td></tr></table>
<a name="IDX122"></a>
<a name="IDX123"></a>
<p><em>NOTE:</em> You should use the <code>DaoManager#createDao</code> methods to create your DAO classes so if they are needed by internal
ORMLite functionality, they can be reused and not regenerated.  Building a DAO can be an expensive operation and for devices with
limited resources (like mobile apps), DAOs should be reused if at all possible.

</p><a name="IDX124"></a>
<p>If you want a better class hierarchy or if you need to add additional methods to your DAOs, you should consider defining
an interface which extends the <code>Dao</code> interface.  The interface isn't required but it is a good pattern so your code is
less tied to JDBC for persistence.  The following is an example DAO interface corresponding to the Account class from the
previous section of the manual:

</p><table><tr><td>&nbsp;</td><td><pre class="example">/** Account DAO which has a String id (Account.name) */
public interface AccountDao extends Dao&lt;Account, String&gt; {
    // empty wrapper, you can add additional DAO methods here
}
</pre></td></tr></table>
<a name="IDX125"></a>
<p>Then in the implementation, you should extend the <code>BaseDaoImpl</code> base class.  Here's the example implementation of your DAO
interface.

</p><a name="IDX126"></a>
<table><tr><td>&nbsp;</td><td><pre class="example">/** JDBC implementation of the AccountDao interface. */
public class AccountDaoImpl extends BaseDaoImpl&lt;Account, String&gt;
  implements AccountDao {
    public AccountDaoImpl(ConnectionSource connectionSource)
      throws SQLException {
        super(connectionSource, Account.class);
    }
}
</pre></td></tr></table>
<p>That's all you need to define your DAO classes.  You are free to add more methods to your DAO interfaces and
implementations if there are specific operations that are needed and not provided by the Dao base classes.
More on how to use these DAOs later. See section <a href="#SEC23">DAO Usage</a>.

</p><p><em>NOTE:</em> If you are using a custom DAO then be sure to add the <code>daoClass</code> argument to the <code>@DatabaseTable</code> annotaion
which specifies the class of your custom DAO.  This is used by the DaoManager to instantiate the DAO internally.  See <a href="#ANC22">DaoManager</a>.

</p><hr size="6">
<a name="NOD15"></a>
<a name="SEC14"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC13" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.5 Supported Databases </h2>

<p>ORMLite supports the following database flavors.  Some of them have some specific documentation that needs to be obeyed.

</p><dl compact="compact">
<dd>
<a name="IDX127"></a>
</dd>
<dt> MySQL</dt>
<dd>
<p>Tables are created in MySQL with the InnoDB engine by default using <code>CREATE TABLE ... ENGINE=InnoDB</code>.  If you want to use
another engine, you can instantiate the <code>MysqlDatabaseType</code> directly and use the <code>setCreateTableSuffix()</code> method to use
the default or another engine.  Also, MySQL does some funky stuff with the last-modification time if a <code>Date</code> is defined as a
<code>TIMESTAMP</code> so <code>DATETIME</code> was used instead.

</p><a name="IDX128"></a>
</dd>
<dt> Postgres</dt>
<dd>
<p>No special instructions.

</p><a name="IDX129"></a>
</dd>
<dt> H2</dt>
<dd>
<p>No special instructions.  We use this database for all of our internal testing with in-memory and small on-disk databases.

</p><a name="IDX130"></a>
<a name="IDX131"></a>
<a name="IDX132"></a>
</dd>
<dt> SQLite</dt>
<dd>
<p>There are multiple SQLite drivers out there.  Make sure you use the Xerial one
(<a href="http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC">http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC</a>) and not the Zentus one
(<a href="http://www.zentus.com/sqlitejdbc/">http://www.zentus.com/sqlitejdbc/</a>) which does not support generated ids.

</p><a name="IDX133"></a>
</dd>
<dt> Android SQLite</dt>
<dd>
<p>Android's SQLite database is accessed through direct calls to the Android database API methods.

</p><a name="IDX134"></a>
</dd>
<dt> Derby</dt>
<dd>
<p>There are two drivers for Derby: one embedded and one client/server.  ORMLite makes an attempt to detect the right driver but you
may have to set the right database type on your ConnectionSource directly if it doesn't.  See section <a href="ormlite_5.html#SEC45">Database Specific Code</a>.

</p><a name="IDX135"></a>
</dd>
<dt> HSQLDB</dt>
<dd>
<p>No special instructions.

</p><a name="IDX136"></a>
<a name="IDX137"></a>
</dd>
<dt> Microsoft SQL Server</dt>
<dd>
<p>No special instructions.

</p><a name="IDX138"></a>
</dd>
<dt> Netezza</dt>
<dd>
<p>As of March 2011, the driver should be considered alpha and possibly with bugs.  I do not currently have access to a server running a
Netezza database. We will try to keep this driver up to date with the help of contributors.  Thanks to Richard Kooijman for the
driver. Please contact us if you want to help with development of this driver.
  
</p><a name="IDX139"></a>
<a name="IDX140"></a>
</dd>
<dt> ODBC</dt>
<dd>
<p>As of March 2011, the driver should be considered alpha and possibly with bugs.  I do not have access to a server running Microsoft's
Open Database Connectivity.  We will try to keep this driver up to date with the help of contributors.  Thanks to Dale Asberry for
the driver.  Please contact us if you want to help with development of this driver.

</p><a name="IDX141"></a>
</dd>
<dt> DB2</dt>
<dd>
<p>I do not have access to an DB2 database so we cannot run any tests to make sure that our support for it works well.  Please contact
us if you want to help with development of this driver.

</p><a name="IDX142"></a>
</dd>
<dt> Oracle</dt>
<dd>
<p>I do not have access to an Oracle database so we cannot run any tests to make sure that our support for it works well.  Please contact us
if you want to help with development of this driver.

</p></dd>
</dl>

<a name="IDX143"></a>
<p>Please contact the author if your database is not supported.

</p><hr size="6">
<a name="NOD16"></a>
<a name="SEC15"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC14" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC16" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.6 Tying It All Together </h2>

<p>So you have annotated the objects to be persisted, added the no-argument constructor, created your <code>ConnectionSource</code>, and
defined your DAO classes.  You are ready to start persisting and querying your database objects.  You will need to download and add
the H2 jar file to your class-path if you want to run the example as-is.  See the H2 home page:
<a href="http://www.h2database.com/html/download.html">http://www.h2database.com/html/download.html</a>.   

</p><p>The following code ties it all together:

</p><table><tr><td>&nbsp;</td><td><pre class="example">// h2 by default but change to match your database
String databaseUrl = &quot;jdbc:h2:mem:account&quot;;
JdbcConnectionSource connectionSource =
  new JdbcConnectionSource(databaseUrl);

// instantiate the dao with the connection source
AccountDaoImpl accountDao = new AccountDaoImpl(connectionSource);

// if you need to create the 'accounts' table make this call
TableUtils.createTable(connectionSource, Account.class);

// create an instance of Account
Account account = new Account(&quot;Jim Coakley&quot;);

// persist the account object to the database
accountDao.create(account);
&hellip;

// destroy the data source which should close underlying connections
connectionSource.destroy();
</pre></td></tr></table>
<p>For more examples, see the code later in the manual.  See section <a href="ormlite_7.html#SEC58">Example Code</a>.

</p><hr size="6">
<a name="NOD17"></a>
<a name="SEC16"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC15" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC17" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.7 Table and Schema Creation </h2>

<p>There a couple of tools that ORMLite provides to help with creating tables and schema for the classes that you are
storing in the database.

</p><table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC17">2.7.1 TableUtils Class</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Class which creates and drops tables.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC18">2.7.2 TableCreator Class</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Spring class which auto-creates tables.
</td></tr>
</table>

<hr size="6">
<a name="NOD18"></a>
<a name="SEC17"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC16" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC18" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC16" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.7.1 TableUtils Class </h3>


<p>The <code>TableUtils</code> class provides a number of static methods that help with creating and dropping tables as well as providing
the schema statements.

</p><dl compact="compact">
<dt><code> createTable(ConnectionSource, Class)</code></dt>
<dd>
<p>This method takes the <code>ConnectionSource</code> and a class and creates the table associated with the class.  It uses the annotations
from the class to determine the various fields and characteristics of the table.  It returns the number of statements executed to
create the table.

</p><table><tr><td>&nbsp;</td><td><pre class="example">TableUtils.createTable(connectionSource, Account.class);
</pre></td></tr></table>
</dd>
<dt><code> createTableIfNotExists(ConnectionSource, Class)</code></dt>
<dd>
<p>Similar to the last method but it will only create the table if it doesn't exist.  This is not supported on all database types.

</p></dd>
<dt><code> createTable(ConnectionSource, DatabaseTableConfig)</code></dt>
<dd>
<p>Similar to the last method but instead of a class, this method uses a <code>DatabaseTableConfig</code> to determine the various fields and
characteristics of the table.

</p><table><tr><td>&nbsp;</td><td><pre class="example">ArrayList&lt;DatabaseFieldConfig&gt; fieldConfigs =
   new ArrayList&lt;DatabaseFieldConfig&gt;();
fieldConfigs.add(new DatabaseFieldConfig(&quot;id&quot;, null,
   DataType.UNKNOWN, null, 0, false, false, true, null,
   false, null, false, null, false, null, false, null,
   null, false));
&hellip;
DatabaseTableConfig&lt;Account&gt; tableConfig =
   new DatabaseTableConfig&lt;Account&gt;(Account.class,
     fieldConfigs);
// this returns number of statements executed to create table
TableUtils.createTable(connectionSource, tableConfig);
</pre></td></tr></table>
</dd>
<dt><code> createTableIfNotExists(ConnectionSource, DatabaseTableConfig)</code></dt>
<dd>
<p>Similar to the last method but it will only create the table if it doesn't exist.  This is not supported on all database types.

</p></dd>
<dt><code> dropTable(ConnectionSource, Class, boolean ignoreErrors)</code></dt>
<dd>
<p>This method drops the table associated with the class.  It uses the annotations from the class to determine the name of the table to
drop. This is not undo-able and most likely will be used only in tests since production tables are dropped rarely.

</p><p>The ignoreErrors argument is useful when you are dropping a table before you are creating it and the table may not already exist.  If
ignoreErrors is true then any exceptions are swallowed.

</p></dd>
<dt><code> dropTable(ConnectionSource, DatabaseTableConfig, boolean ignoreErrors)</code></dt>
<dd>
<p>Same as the previous method but it will use the <code>DatabaseTableConfig</code> to determine the name of the table to drop.

</p></dd>
<dt><code> getCreateTableStatements(ConnectionSource, Class)</code></dt>
<dd>
<p>This is similar to the <code>createTable</code> method but will return a list of statements that can be used to create a class.  This is
useful if you want to load the schema during some sort of database initialization process.

</p></dd>
<dt><code> getCreateTableStatements(ConnectionSource, DatabaseTableConfig)</code></dt>
<dd>
<p>Same as the previous method but with a <code>DatabaseTableConfig</code> instead.

</p><a name="IDX144"></a>
<a name="IDX145"></a>
</dd>
<dt><code> clearTable(ConnectionSource, Class)</code></dt>
<dd>
<p>Clear all data out of the table. For certain database types and with large sized tables, which may take a long time. In some
configurations, it may be faster to drop and re-create the table.  This is [obviously] very destructive and is unrecoverable.

</p></dd>
<dt><code> clearTable(ConnectionSource, DatabaseTableConfig)</code></dt>
<dd>
<p>Same as the previous method but with a <code>DatabaseTableConfig</code> instead.

</p></dd>
</dl>

<hr size="6">
<a name="NOD19"></a>
<a name="SEC18"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC17" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC16" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.7.2 TableCreator Class </h3>

<p>The <code>TableCreator</code> class is engineered for use with Spring but could be useful in other configurations.  It is configured with
the <code>ConnectionSource</code> and the list of DAOs that are being used by the program.

</p><p>It will automagically create the tables associated with those DAOs if the system property <code>ormlite.auto.create.tables</code> is set
with the value &quot;true&quot;.  It also will automagically drop the tables that were created if the system property
<code>ormlite.auto.drop.tables</code> is set with the value &quot;true&quot;.  This is especially useful in tests when you are starting with a test
database that needs to get the latest schema but in production you want to make specific schema changes by hand.  You can set the
system properties in your test start scripts but leave them off in the production scripts.

</p><table><tr><td>&nbsp;</td><td><pre class="example">List&lt;Dao&lt;?, ?&gt;&gt; daoList = new ArrayList&lt;Dao&lt;?, ?&gt;&gt;();
daoList.add(accountDao);
&hellip;

TableCreator creator =
   new TableCreator(connectionSource, daoList);
// create the tables if the right system property is set
creator.maybeCreateTables();
&hellip;

// later, we may want to drop the tables that were created 
creator.maybeDropTables();
</pre></td></tr></table>
<p>For a real life example of using <code>TableCreator</code> you can see <a href="ormlite_7.html#ANC33">spring example</a>.

</p><hr size="6">
<a name="NOD20"></a>
<a name="SEC19"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC18" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC20" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.8 Identity Columns </h2>

<p>Database rows can be identified by a particular column which is defined as the <em>identity</em> column.  Rows do not need to
have an identity column but many of the DAO operations (update, delete, refresh) require an identity column.  The identity can
either be supplied by the user or auto-generated by the database.  Identity columns have unique values for every row in the
table and they must exist if you want to query-by-id, delete, refresh, or update a particular row using the DAO.  To
configure a field as an identity field, you should use one (and only one) of the following three settings from
<code>@DatabaseField</code>: <code>id</code>, <code>generatedId</code>, or <code>generatedIdSequence</code>.

</p><table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC20">2.8.1 Fields With id</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                        Using fields with id = true.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC21">2.8.2 Fields With generatedId</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Using fields with generatedId = true.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC22">2.8.3 Fields With generatedIdSequence</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Using fields with generatedIdSequence = ...
</td></tr>
</table>

<hr size="6">
<a name="NOD21"></a>
<a name="SEC20"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC19" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC21" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.8.1 Fields With id </h3>

<p>With our <code>Account</code> example class, the string <code>name</code> field has been marked with <code>id = true</code>.  This means
that the <code>name</code> is the identity column for the object.  Each account stored in the database must have a unique
value for the <code>name</code> field - you cannot have two rows with the name &quot;John Smith&quot;.

</p><table><tr><td>&nbsp;</td><td><pre class="example">public class Account {
    @DatabaseField(id = true)
    private String name;
    &hellip;
}
</pre></td></tr></table>
<p>When you use the DAO to lookup an account with a particular name, you will use the identity field to locate the
<code>Account</code> object in the database:

</p><table><tr><td>&nbsp;</td><td><pre class="example">Account account = accountDao.queryForId(&quot;John Smith&quot;);
if (account == null) {
    // the name &quot;John Smith&quot; does not match any rows
}
</pre></td></tr></table>
<a name="IDX146"></a>
<a name="IDX147"></a>
<a name="IDX148"></a>
<p><em>NOTE:</em> If you need to change the value of an object's id field, you must use the <code>Dao.updateId()</code> method which
takes the current object still with its <em>old</em> id value and the new value.  ORMLite has to first locate the object
by its old id and then update it with the new id.  See <a href="ormlite_5.html#ANC27">updateId</a>.

</p><hr size="6">
<a name="NOD22"></a>
<a name="SEC21"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC20" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC22" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.8.2 Fields With generatedId </h3>

<p>You can configure a long or integer field to be a <em>generated</em> identity column.  The id number column for each row
will then be automatically generated by the database.  

</p><table><tr><td>&nbsp;</td><td><pre class="example">public class Order {
    @DatabaseField(generatedId = true)
    private int id;
    &hellip;
}
</pre></td></tr></table>
<p>When an <code>Order</code> object is passed to <code>create</code> and stored to the database, the generated identity value is returned
by the database and set on the object by ORMLite.  In the majority of database types, the generated value starts at
1 and increases by 1 every time a new row is inserted into the table.

</p><table><tr><td>&nbsp;</td><td><pre class="example">// build our order object without an id
Order order = new Order(&quot;Jim Sanders&quot;, 12.34);
&hellip;
orderDao.create(order);
System.out.println(&quot;Order id &quot; + order.getId() +
   &quot; was persisted to the database&quot;);
// query for the order with an id of 1372
order = orderDao.queryForId(1372);
if (order == null) {
   // none of the order rows have an id of 1372
}
</pre></td></tr></table>
<p>In the above code example, an order is constructed with name and amount (for example).  When it is passed to the DAO's
<code>create</code> method, the id field has not been set.  After it has been saved to the database, the generated-id will
be set on the id field by ORMLite and will be available when <code>getId()</code> is called on the order after the
<code>create</code> method returns.

</p><p><em>NOTE:</em> Depending on the database type, you may not be able to change the value of an auto-generated id field.

</p><hr size="6">
<a name="NOD23"></a>
<a name="SEC22"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC21" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC23" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.8.3 Fields With generatedIdSequence </h3>


<p>Some databases use what's called a sequence number generator to provide the generated id value.  If you use
<code>generatedId = true</code> with those databases, a sequence name will be auto-generated by ORMLite.
If, however, you need to set the name of the sequence to match existing schema, you can used the
<code>generatedIdSequence</code> value which takes a string name for the sequence.

</p><table><tr><td>&nbsp;</td><td><pre class="example">public class Order {
    @DatabaseField(generatedIdSequence = &quot;order_id_seq&quot;)
    private int id;
    &hellip;
}
</pre></td></tr></table>
<p>In the above example, the <code>id</code> value is again automatically generated but using a sequence with the name
<code>order_id_seq</code>.  This will throw an exception if you are working with a database which does not support
sequences.

</p><p><em>NOTE:</em> Depending on the database type, you may not be able to change the value of an auto-generated id field.

</p><hr size="6">
<a name="NOD24"></a>
<a name="SEC23"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC22" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC24" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.9 DAO Usage </h2>


<p>The following database operations are easily accomplished by using the DAO methods:

</p><dl compact="compact">
<dd>
<a name="IDX149"></a>
<a name="IDX150"></a>
<a name="IDX151"></a>
<a name="IDX152"></a>
</dd>
<dt> create and persist an object to the database</dt>
<dd>
<p>This inserts a new row to the database table associated with the object.

</p><table><tr><td>&nbsp;</td><td><pre class="example">Account account = new Account();
account.name = &quot;Jim Coakley&quot;;
accountDao.create(account);
</pre></td></tr></table>
<a name="IDX153"></a>
</dd>
<dt> query for it's id column </dt>
<dd>
<p>If the object has an id field defined by the annotations, then we can lookup an object in the database using its id.

</p><table><tr><td>&nbsp;</td><td><pre class="example">Account account = accountDao.queryForId(name);
if (account == null) {
  account not found handling &hellip; 
}
</pre></td></tr></table>
<a name="IDX154"></a>
</dd>
<dt> update the database row associated with the object</dt>
<dd>
<p>If you change fields in an object in memory, you must call update to persist those changes to the database.  This
requires an id field. 

</p><table><tr><td>&nbsp;</td><td><pre class="example">account.password = &quot;_secret&quot;;
accountDao.update(account);
</pre></td></tr></table>
<a name="IDX155"></a>
</dd>
<dt> refreshing an object if the database has changed</dt>
<dd>
<p>If some other entity has changed a row the database corresponding to an object in memory, you will need to refresh that
object to get the memory object up-to-date.  This requires an id field. 

</p><table><tr><td>&nbsp;</td><td><pre class="example">accountDao.refresh(account);
</pre></td></tr></table>
<a name="IDX156"></a>
</dd>
<dt> delete the account from the database</dt>
<dd>
<p>Removes the row that corresponds to the object from the database.  Once the object has been deleted from the database,
you can continue to use the object in memory but any update or refresh calls will most likely fail.  This requires an id
field.

</p><table><tr><td>&nbsp;</td><td><pre class="example">accountDao.delete(account);
</pre></td></tr></table>
<a name="IDX157"></a>
<a name="IDX158"></a>
</dd>
<dt> iterate through all of the rows in a table:</dt>
<dd>
<p>The DAO is also an iterator so you can easily run through all of the rows in the database:

</p><table><tr><td>&nbsp;</td><td><pre class="example">// page through all of the accounts in the database
for (Account account : accountDao) {
    System.out.println(account.getName());
}
</pre></td></tr></table>
<a name="IDX159"></a>
<p><em>NOTE:</em> you must page through <em>all</em> items for the iterator to close the underlying SQL object.   If you don't
go all of the way, the garbage collector will close the SQL statement some time later which is considered bad form.

</p></dd>
<dt> use the iterator directly</dt>
<dd>
<p>You can also use the iterator directly if the for-loop is not optimal.

</p><table><tr><td>&nbsp;</td><td><pre class="example">// page through all of the accounts in the database
CloseableIterator&lt;Account&gt; iterator = accountDao.iterator();
while (iterator.hasNext()) {
    Account account = iterator.next();
    System.out.println(account.getName());
}
// close it at the end to close underlying SQL statement
iterator.close();
</pre></td></tr></table>
</dd>
</dl>

<p>For a detailed list of the methods in the DAO see section <a href="ormlite_5.html#SEC46">DAO Methods</a>.

</p><hr size="6">
<a name="NOD25"></a>
<a name="SEC24"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC23" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC25" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.10 Indexing Fields </h2>

<p>ORMLite provides some limited support for indexing of various fields in your data classes.  First off, it
is important to point out that any field marked as an <code>id</code> field is already indexed.  Fields that are id fields
do not need to have additional indexes built and if they are specified, errors may result with certain database.

</p><p>To add an index on a non-id field, all you need to do is add the <code>index = true</code> boolean field to the
<code>@DatabaseField</code> annotation.  See <a href="#ANC5">index</a>.  This will create a non-unique index after the table is created 
for the field and will drop the index if the table is then dropped.  Indexes help optimize queries and can
significantly improve times on queries to medium to large sized tables.

</p><table><tr><td>&nbsp;</td><td><pre class="example">public class Account {
    @DatabaseField(id = true)
    private String name;
    // this indexes the city field so queries on city
    // will go faster for large tables
    @DatabaseField(index = true)
    private String city;
    &hellip;
}
</pre></td></tr></table>

<p>This example creates the index <code>account_city_idx</code> on the Account table.  If you want to use a different name, you
can use the <code>indexName = &quot;othername&quot;</code> field instead which allows you to specify the name of the index.

</p><p>If you often query on (for example) city <em>and</em> state fields together, you might want to create an index
on both fields.  ORMLite supports creating indexes on multiple fields by specifying the same <code>indexName</code>
value for each of the fields you want to be included in the index.

</p><table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseField(indexName = &quot;account_citystate_idx&quot;)
private String city;
@DatabaseField(indexName = &quot;account_citystate_idx&quot;)
private String state;
</pre></td></tr></table>
<p>This example will create one index for both the city and state fields.  Note that queries on the city by itself will
<em>not</em> be optimized - only queries on <em>both</em> city and state will be.  With some databases, it may be better to
create a single field index on each field and let the database use both indexes if you are querying on city and state.
For other databases, creating an index on multiple fields is recommended. You may need to experiment and use the SQL
<code>EXPLAIN</code> command to pinpoint how your database is utilizing your indexes.

</p><p>To create <em>unique</em> indexes, there is a <code>uniqueIndex = true</code> and <code>uniqueIndexName = &quot;othername&quot;</code> fields
also available on the <code>@DatabaseField</code> annotation.  These work the same as the above settings but will instead
create unique indexes that ensure that no two row has the same value(s) for the indexed field(s).

</p><hr size="6">
<a name="NOD26"></a>
<a name="SEC25"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC24" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC26" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.11 Issuing Raw SQL Statements </h2>

<p>In a number of instances, using the defined DAO functionality may not be enough to change your database.  For this
reason, ORMLite has calls which allow you to issue raw query, update, and execute statements to the database.

</p><table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC26">2.11.1 Issuing Raw Queries</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Running raw queries against the database.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC27">2.11.2 Issuing Raw Update Statements</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Updating the database with raw SQL statements.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC28">2.11.3 Issuing Raw Execute Statements</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Executing other raw SQL statements.
</td></tr>
</table>

<hr size="6">
<a name="NOD27"></a>
<a name="SEC26"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC25" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC27" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC25" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.11.1 Issuing Raw Queries </h3>

<p>The built-in methods available in the <code>Dao</code> interface and the <code>QueryBuilder</code> classes don't provide
the ability to handle all types of queries.  For example, aggregation queries (sum, count, avg, etc.) cannot be handled
as an object since every query has a different result list.  To handle these queries, you can issue raw database queries
using the <code>queryRaw</code> methods on DAO.  These methods return a <code>GenericRawResults</code> object which represents a
result as an array of strings, array of objects, or user objects.  See the documentation on the <code>GenericRawResults</code>
object for more details on how to use it, or take a look at the following examples.

</p><table><tr><td>&nbsp;</td><td><pre class="example">// find out how many orders account-id #10 has
GenericRawResults&lt;String[]&gt; rawResults =
  orderDao.queryRaw(
    &quot;select count(*) from orders where account_id = 10&quot;);
// there should be 1 result
List&lt;String[]&gt; results = rawResults.getResults();
// the results array should have 1 value
String[] resultArray = results.get(0);
// this should print the number of orders that have this account-id
System.out.println(&quot;Account-id 10 has &quot; + resultArray[0] + &quot; orders&quot;);
</pre></td></tr></table>
<p>For large numbers of results, you should consider using the <code>iterator()</code> method on the <code>GenericRawResults</code> object
which uses database paging.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">// return the orders with the sum of their amounts per account
GenericRawResults&lt;String[]&gt; rawResults =
  orderDao.queryRaw(
    &quot;select account_id,sum(amount) from orders group by account_id&quot;);
// page through the results
for (String[] resultArray : rawResults) {
  System.out.println(&quot;Account-id &quot; + resultArray[0] + &quot; has &quot;
    + resultArray[1] + &quot; total orders&quot;);
}
rawResults.close();
</pre></td></tr></table>
<p>If some of your fields cannot be appropriately mapped to strings, you can also return the fields as an <code>Object[]</code> if you
pass in the types of the resulting columns.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">// return the orders with the sum of their amounts per account
GenericRawResults&lt;Object[]&gt; rawResults =
  orderDao.queryRaw(
    &quot;select account_id,sum(amount) from orders group by account_id&quot;,
    new DataType[] { DataType.LONG, DataType.INTEGER });
// page through the results
for (Object[] resultArray : rawResults) {
  System.out.println(&quot;Account-id &quot; + resultArray[0] + &quot; has &quot;
    + resultArray[1] + &quot; total orders&quot;);
}
rawResults.close();
</pre></td></tr></table>
<p><em>NOTE</em>: <code>select *</code> can return fields in different orders depending on the database type.  To make sure that the data-type
array matches the returned columns you must specify the fields specifically and <em>not</em> with a SQL <code>*</code>.

</p><p>You can also map the results into your own object by passing in a <code>RawRowMapper</code> object.  This will call the mapping object
with an array of strings and allow it to convert the strings into an object.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">// return the orders with the sum of their amounts per account
GenericRawResults&lt;Foo&gt; rawResults =
  orderDao.queryRaw(
    &quot;select account_id,sum(amount) from orders group by account_id&quot;,
    new RawRowMapper&lt;Foo&gt;() {
            public Foo mapRow(String[] columnNames,
              String[] resultColumns) {
                return new Foo(Long.parseLong(resultColumns[0]),
                    Integer.parseInt(resultColumns[1]));
        }
    });
// page through the results
for (Foo foo : rawResults) {
  System.out.println(&quot;Account-id &quot; + foo.accountId + &quot; has &quot;
    + foo.totalOrders + &quot; total orders&quot;);
}
rawResults.close();
</pre></td></tr></table>
<p><em>NOTE</em>: The query and the resulting strings can be <em>very</em> database-type specific.  For example:
</p><ol>
<li><p> Certain databases need any column names specified in uppercase - others need lowercase.
</p></li><li><p> You may have to quote your column or table names if they are reserved words.
</p></li><li><p> The resulting column names also could be uppercase or lowercase.
</p></li><li><p> <code>select *</code> can return fields in different orders depending on the database type.
</p></li></ol>

<p><em>NOTE</em>: Like other ORMLite iterators, you will need to make sure you iterate through all of the results
to have the statement closed automatically.  You can also call the <code>GenericRawResults.close()</code> method to make sure the
iterator, and any associated database connections, is closed.

</p><hr size="6">
<a name="NOD28"></a>
<a name="SEC27"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC26" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC28" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC25" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.11.2 Issuing Raw Update Statements </h3>

<p>You can also issue raw update statements against the database if the DAO functionality does not give you
enough flexibility.  Update SQL statements must contain the reserved words <code>INSERT</code>, <code>DELETE</code>, or
<code>UPDATE</code>.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">fooDao.updateRaw(&quot;INSERT INTO accountlog (account_id, total) &quot;
   + &quot;VALUES ((SELECT account_id,sum(amount) FROM accounts))
</pre></td></tr></table>
<hr size="6">
<a name="NOD29"></a>
<a name="SEC28"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC27" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC29" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC25" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.11.3 Issuing Raw Execute Statements </h3>

<p>You can also issue raw update statements against the database if the DAO functionality does not give you
enough flexibility.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">fooDao.executeRaw(&quot;ALTER TABLE accountlog DROP COLUMN partner&quot;);
</pre></td></tr></table>
<hr size="6">
<a name="NOD30"></a>
<a name="SEC29"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC28" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC30" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.12 Foreign Object Fields </h2>

<p>ORMLite supports the concept of &quot;foreign&quot; objects where one or more of the fields correspond to an object
are persisted in another table in the same database.  For example, if you had an <code>Order</code> objects in your database
and each <code>Order</code> had a corresponding <code>Account</code> object, then the <code>Order</code> object would have foreign
<code>Account</code> field.  With foreign objects, <em>just</em> the id field from the <code>Account</code> is persisted
to the <code>Order</code> table as the column &quot;<code>account_id</code>&quot;.  For example, the <code>Order</code> class might look
something like:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseTable(tableName = &quot;orders&quot;)
public class Order {

    @DatabaseField(generatedId = true)
    private int id;
    
    @DatabaseField(canBeNull = false, foreign = true)
    private Account account;
    &hellip;
}
</pre></td></tr></table>
<p>When the <code>Order</code> table was created, something like the following SQL would be generated:

</p><table><tr><td>&nbsp;</td><td><pre class="example">CREATE TABLE `orders`
   (`id` INTEGER AUTO_INCREMENT , `account_id` INTEGER,
    PRIMARY KEY (`id`)); 
</pre></td></tr></table>
<p><em>Notice</em> that the name of the field is <em>not</em> <code>account</code> but is instead <code>account_id</code>.  You will need to
use this field name if you are querying for it.  You can set the column name using the <code>columnName</code> field in the
<code>DatabaseField</code> annotation. See <a href="#ANC1">columnName</a>.

</p><a name="IDX160"></a>
<a name="IDX161"></a>
<p>When you are creating a field with a foreign object, please note that the foreign object will <em>not</em> automatically be
created for you.  If your foreign object has a generated-id which is provided by the database then you need to create it
<em>before</em> you create any objects that reference it.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">Account account = new Account(&quot;Jim Coakley&quot;);
accountDao.create(account);
// this will create the account object and set any generated ids

// now we can set the account on the order and create it
Order order = new Order(&quot;Jim Sanders&quot;, 12.34);
order.setAccount(account);
&hellip;
orderDao.create(order);
</pre></td></tr></table>
<a name="IDX162"></a>
<a name="IDX163"></a>
<p>When you query for an order, you will get an <code>Order</code> object with an account field object that <em>only</em> has its id
field set.  The rest of the fields in the foreign <code>Account</code> object will have default values (null, 0, false, etc.).  If
you want to use other fields in the <code>Account</code>, you must call <code>refresh</code> on the <code>accountDao</code> class to get the
<code>Account</code> object filled in.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">Order order = orderDao.queryForId(orderId);
System.out.println(&quot;Account-id on the order should be set: &quot; +
   order.account.id);
// this should print null for order.account.name
System.out.println(&quot;But other fields on the account should not be set: &quot;
   + order.account.name);

// so we refresh the account using the AccountDao
accountDao.refresh(order.getAccount());
System.out.println(&quot;Now the account fields will be set: &quot; +
   order.account.name);
</pre></td></tr></table>
<p>You can have the foreign objects automagically refreshed by using the <code>foreignAutoRefresh</code> setting. See <a href="#ANC6">foreignAutoRefresh</a>.

</p><p><em>NOTE:</em> Because we use refresh, foreign objects are therefor <em>required</em> to have an id field.

</p><p>There is example code to show how to use foreign objects.  See <a href="ormlite_7.html#ANC29">foreign objects example</a>.

</p><hr size="6">
<a name="NOD31"></a>
<a name="SEC30"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC29" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC31" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.13 Foreign Collections </h2>

<p>As of March 2011, one of the newest features of ORMLite is the concept of a &quot;Foreign Collection&quot;.  In the above section of the
manual we gave the example of the <code>Order</code> class having a foreign object field to the <code>Account</code> table.  A foreign collection
allows you to add a collection of orders on the account table.  Whenever an <code>Account</code> object is returned by a query or refreshed
by the DAO, a <em>separate</em> query is made over the order table and a collection of orders is set on the account.  All of the orders
in the collection have a corresponding foreign object that matches the account.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">public class Account {
    &hellip;
    @ForeignCollectionField(eager = false)
    ForeignCollection&lt;Order&gt; orders;
    &hellip;
}
</pre></td></tr></table>
<p>In the above example, the <code>@ForeignCollectionField</code> annotation marks that the <code>orders</code> field is a collection of the orders
that match the account.  The field type of <code>orders</code> must be either <code>ForeignCollection&lt;T&gt;</code> or <code>Collection&lt;T&gt;</code> - no
other collections are supported.  There are two different types of foreign collections: eager or lazy.   If eager is set to true then
the separate query is made immediately and the orders are stored as a list within the collection.  If eager is set to false (the
default) then the collection is considered to be &quot;lazy&quot; and will iterate over the database using the <code>Dao.iterator()</code> only when
a method is called on the collection.

</p><p>Remember that when you have a <code>ForeignCollection</code> field, the class in the collection <em>must</em> (in this example Order) must
gave a foreign field for the class that has the collection (in this example Account).  If Account has a foreign collection of Orders,
then Order must have an Account foreign field.  It is required so ORMLite can find the orders that match a particular account.   

</p><p><em>WARNING:</em> With lazy collections, even the <code>size()</code> method causes a iteration across the database.  You'll most likely want
to just use the <code>iterator()</code> and <code>toArray()</code> methods on lazy collections.

</p><p><em>NOTE:</em> Like with the <code>Dao.iterator()</code> method, the iterator returned by a lazy collection must be closed when you are done
with it because there is a connection open to the database underneath.  A close happens either if you go all of the way through the
iterator or if you call <code>close()</code> on it.  Only the <code>ForeignCollection</code> returns a closable iterator.

</p><p>The foreign collections support the <code>add()</code> and <code>remove()</code> methods in which case the objects will be both added or removed
from the internal list if the collection is eager, and DAO calls will be made to affect the order table as well for both eager and
lazy collections.

</p><p>There is example code to show how to use foreign collections.  See <a href="ormlite_7.html#ANC30">foreign collections example</a>.

</p><hr size="6">
<a name="NOD32"></a>
<a name="SEC31"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC30" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.14 DAO Enabled Objects </h2>

<p>Another ORM pattern is to have the objects perform the database operations on themselves instead of using a
Database Access Object (DAO).  For example, given a data object <code>foo</code>,  you would call <code>foo.refresh()</code>
instead of <code>fooDao.refresh(foo)</code>.  The default pattern is to use the Dao classes which allow your data
classes to have their own hierarchy and it isolates the database code in the Daos. However, you are free to use
the <code>BaseDaoEnabled</code> class if you prefer this pattern.  As of March 2011, it is one of the newer parts of
ORMLite so feedback and bug reports are welcome.

</p><a name="IDX164"></a>
<p>All classes that are able to refresh (update, delete, etc.) themselves should extend the <code>BaseDaoEnabled</code> 
class.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseTable(tableName = &quot;accounts&quot;)
public class Account extends BaseDaoEnabled {

    @DatabaseField(id = true)
    private String name;

    @DatabaseField(canBeNull = false)
    private String password;
    &hellip;
</pre></td></tr></table>
<p>To first create the object, you will need to use the DAO object or you will need to set the dao on the object so
that it can self create:

</p><table><tr><td>&nbsp;</td><td><pre class="example">account.setDao(accountDao);
account.create();
</pre></td></tr></table>
<p>However, whenever an object is returned by ORMLite as query results, the DAO has already been set on the
object it extends the <code>BaseDaoEnabled</code> class.

</p><table><tr><td>&nbsp;</td><td><pre class="example">Account account = accountDao.queryForId(name);
account.setPassword(newPassword);
account.update();
</pre></td></tr></table>
<p>This will also work for foreign fields.

</p><table><tr><td>&nbsp;</td><td><pre class="example">Order order = orderDao.queryForId(orderId);
// load all of the fields from the account
order.getAccount().refresh();
</pre></td></tr></table>
<p>The javadocs for <code>BaseDaoEnabled</code> will have the most up-to-date list of self operations but right now the
class can do:

</p><dl compact="compact">
<dt><code> create</code></dt>
<dd>
<p>To create the object you will need to use the DAO or to call <code>setDao()</code> on the object.

</p></dd>
<dt><code> refresh</code></dt>
<dd>
<p>Refresh the object in case it was updated in the database.

</p></dd>
<dt><code> update</code></dt>
<dd>
<p>After you make changes to the object in memory, update it in the database.

</p></dd>
<dt><code> updateId</code></dt>
<dd>
<p>If you need to update the id of the object, you must use this method.  You cannot change the id field in the object and
then call the update method because then the object will not be found.

</p></dd>
<dt><code> delete</code></dt>
<dd>
<p>Delete it from the database.

</p></dd>
</dl>

<p>Feedback on this is welcome.

</p><hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC32" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_10.html#SEC63" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>Gray Watson</em> on <em>May, 5 2011</em> using <a href="http://texi2html.cvshome.org/"><em>texi2html 1.70</em></a>.
 </font>
 <br>

</p>
</body>
</html>
