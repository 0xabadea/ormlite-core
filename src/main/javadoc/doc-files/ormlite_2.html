<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on November, 17 2010 by texi2html 1.70 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<head>
<title>ORM Lite Package: 2. How to Use</title>

<meta name="description" content="ORM Lite Package: 2. How to Use">
<meta name="keywords" content="ORM Lite Package: 2. How to Use">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.70">
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="NOD7"></a>
<a name="SEC6"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="ormlite_1.html#SEC5" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC7" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite_1.html#SEC1" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="chapter"> 2. How to Use </h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC7">2.1 Setting Up Your Classes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 How to setup your classes to be persisted.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC11">2.2 Persisted Data Types</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Data types that can be persisted.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC12">2.3 Setting Up the DAOs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   How to configure the Database Access Objects.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC13">2.4 JDBC Connection Sources</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Setting up connections to databases.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC14">2.5 Database Type</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Defining your database type.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC15">2.6 Supported Databases</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Support databases and associated notes.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC16">2.7 Tying It All Together</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Tying all of the wiring together.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC17">2.8 DAO Usage</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   Using the Database Access Objects.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC18">2.9 Identity Columns</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            How identity fields and columns work.
</td></tr>
</table>

<hr size="6">
<a name="NOD8"></a>
<a name="SEC7"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC6" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC8" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.1 Setting Up Your Classes </h2>

<p>To setup your classes to be persisted you need to do the following things:

</p><ol>
<li><p> Add the @DatabaseTable annotation to the top of each class.  You can also use @Entity.
</p></li><li><p> Add the @DatabaseField annotation right before each field to be persisted.  You can also use @Column and others.
</p></li><li><p> Add a no-argument constructor to each class with at least package visibility.
</p></li></ol>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC8">2.1.1 Adding ORMLite Annotations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Adding the annotations to your classes.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC9">2.1.2 Using javax.persistence Annotations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Using javax.persistence annotations instead.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC10">2.1.3 Adding a No-Argument-Constructor</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               A no-argument-constructor is also required.
</td></tr>
</table>

<hr size="6">
<a name="NOD9"></a>
<a name="SEC8"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC7" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC9" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC7" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.1.1 Adding ORMLite Annotations </h3>

<p>Annotations are special code markers have have been available in Java since version 5 that provide meta information
about classes, methods, or fields.  To specify what classes and fields to store in the database, ORMLite
supports either its own annotations (<code>@DatabaseTable</code> and <code>@DatabaseField</code>) or the more standard
annotations from the <code>javax.persistence</code> package.  See section <a href="#SEC9">Using javax.persistence Annotations</a>.   Annotations are the
easiest way to configure your classes but you can also configure the class using Java code or Spring XML.
See section <a href="ormlite_7.html#SEC35">Class Configuration</a>.

</p><p>With ORMLite annotations, for each of the Java classes that you would like to persist to your SQL database, you
will need to add the <code>@DatabaseTable</code> annotation right above the <code>public class</code> line.  Each class marked with
one of these annotations will be persisted into its own database table.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseTable(tableName = &quot;accounts&quot;)
public class Account {
&hellip;
</pre></td></tr></table>
<p>The <code>@DatabaseTable</code> annotations can have an optional <code>tableName</code> argument which specifies the name of the table
that corresponds to the class.   If not specified, the class name, all lowercase, is used by default.  With the above example
each <code>Account</code> object will be persisted as a row in the <code>accounts</code> table in the database.  If the <code>tableName</code>
was not specified, the <code>account</code> table would be used instead.

</p><a name="IDX10"></a>
<a name="IDX11"></a>
<p>Additionally, for each of the classes, you will need to add a <code>@DatabaseField</code> annotation to each of the <em>fields</em>
in the class that are to be persisted to the database.  Each field is persisted as a column of a database row.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseTable(tableName = &quot;accounts&quot;)
public class Account {

    @DatabaseField(id = true)
    private String name;

    @DatabaseField(canBeNull = false)
    private String password;
    &hellip;
</pre></td></tr></table>
<p>In the above example, each row in the <code>accounts</code> table has 2 columns:

</p><ul>
<li><p> the <code>name</code> column which is a string and also is the database identity (id) of the row
</p></li><li><p> the <code>password</code> column, also a string which can not be null
</p></li></ul>


<p>The @DatabaseField annotation can have the following fields:

</p><dl compact="compact">
<dd>
<a name="IDX12"></a>
<a name="IDX13"></a>
<p><a name="ANC1"></a>
</p></dd>
<dt><code> columnName</code></dt>
<dd>
<p>String name of the column in the database that will hold this field. If not set then the field name, all lowercase, is used instead.

</p><a name="IDX14"></a>
<a name="IDX15"></a>
<a name="IDX16"></a>
</dd>
<dt><code> dataType</code></dt>
<dd>
<p>The type of the field as the DataType class.  Usually the type is taken from Java class of the field and does not need
to be specified.  This corresponds to the SQL type.  See section <a href="#SEC11">Persisted Data Types</a>.

</p><a name="IDX17"></a>
</dd>
<dt><code> defaultValue</code></dt>
<dd>
<p>String default value of the field when we are creating a new row in the table.  Default is none.

</p><a name="IDX18"></a>
<a name="IDX19"></a>
<a name="IDX20"></a>
</dd>
<dt><code> width</code></dt>
<dd>
<p>Integer width of array fields - usually for strings.  Some databases do not support this unfortunately.  Default for 
those that do is 255.

</p><a name="IDX21"></a>
<a name="IDX22"></a>
</dd>
<dt><code> canBeNull</code></dt>
<dd>
<p>Boolean whether the field can be assigned to null value. Default is true.  If set to false then you must provide a value
for this field on every object inserted into the database.

</p><a name="IDX23"></a>
<a name="IDX24"></a>
<a name="IDX25"></a>
</dd>
<dt><code> id</code></dt>
<dd>
<p>Boolean whether the field is the id field or not. Default is false. Only one field can have this set in a class. Id fields
uniquely identity a row.  If you don't have it set then you won't be able to use the query, update, refresh, and delete by
ID methods. Only one of this, <code>generatedId</code>, and <code>generatedIdSequence</code> can be specified.  See section <a href="#SEC19">Fields With id</a>.

</p><a name="IDX26"></a>
<a name="IDX27"></a>
</dd>
<dt><code> generatedId</code></dt>
<dd>
<p>Boolean whether the field is an auto-generated id field. Default is false.  Only one field can have this set in a class.
This tells the database to auto-generate a corresponding id for every row inserted.  When an object with a generated-id
is created using the <code>Dao.create()</code> method, the database will generate an id for the row which will be returned and
set in the object by the create method.  Some databases require sequences for generated ids in which case the sequence
name will be auto-generated. To specify the name of the sequence use <code>generatedIdSequence</code>. Only one of this,
<code>id</code>, and <code>generatedIdSequence</code> can be specified.  See section <a href="#SEC20">Fields With generatedId</a>.

</p><a name="IDX28"></a>
<a name="IDX29"></a>
<a name="IDX30"></a>
</dd>
<dt><code> generatedIdSequence</code></dt>
<dd>
<p>String name of the sequence number to be used to generate this value.  Same as <code>generatedId</code> but you can specify the
sequence name to use.  Default is none. Only one field can have this set in a class. This is only necessary for databases
which require sequences for generated ids.  If you use generatedId instead then the code will auto-generate a sequence name.
Only one of this, <code>id</code>, and <code>generatedId</code> can be specified.  See section <a href="#SEC21">Fields With generatedIdSequence</a>.

</p><a name="IDX31"></a>
<a name="IDX32"></a>
</dd>
<dt><code> foreign</code></dt>
<dd>
<a name="IDX33"></a>
<p>Boolean setting which identifies this field as corresponding to another class that is also stored in the database.
Default is false.  The field can not be a primitive type.  The other class must have an id field (either <code>id</code>,
<code>generatedId</code>, or <code>generatedIdSequence</code>) which will be stored in this table. When an object is returned
from a query call, any foreign objects will <em>just</em> have the id field set.  See section <a href="ormlite_4.html#SEC27">Foreign Object Fields</a>.

</p><a name="IDX34"></a>
<a name="IDX35"></a>
<a name="IDX36"></a>
<a name="IDX37"></a>
</dd>
<dt><code> useGetSet</code></dt>
<dd>
<p>Boolean that says that the field should be accessed with get and set methods.  Default is false which instead uses
direct field access via Java reflection.  This may be necessary if the object you are storing has
protections around it.

</p><p><em>NOTE:</em> The name of the get method <em>must</em> match getXxx() where Xxx is the name of the field with the first
letter capitalized. The get <em>must</em> return a class which matches the field's exactly. The set method <em>must</em>
match setXxx(), have a single argument whose class matches the field's exactly, and return void.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseField(useGetSet = true)
private Integer orderCount;

public Integer getOrderCount() {
  return orderCount;
}

public void setOrderCount(Integer orderCount) {
  this.orderCount = orderCount;
}
</pre></td></tr></table>
<a name="IDX38"></a>
<a name="IDX39"></a>
<p><a name="ANC2"></a>
</p></dd>
<dt><code> unknownEnumName</code></dt>
<dd>
<p>If the field is a Java enumerated type then you can specify the name of a enumerated value which will be used if the
value of a database row is not found in the enumerated type.  If this is not specified and a database row <em>does</em>
contain an unknown name or ordinal value then a <code>SQLException</code> is thrown when the row is being read from the database.
This is useful to handle backwards compatibility when handling out-of-date database values as well as forwards
compatibility if old software is accessing up-to-date data or if you have to roll a release back.

</p><a name="IDX40"></a>
<a name="IDX41"></a>
<a name="IDX42"></a>
</dd>
<dt><code> throwIfNull</code></dt>
<dd>
<p>Boolean that tells ORMLite to throw an exception if it sees a null value in a database row and is trying to store
it in a primitive field.  By default it is false.  If it is false and the database field is null, then the value of the
primitive will be set to 0 (false, null, etc.).  This can only be used on a primitive field.

</p></dd>
<dt><code> persisted</code></dt>
<dd>
<p>Set this to be false (default true) to not store this field in the database. This is useful if you want to have
the annotation on all of your fields but turn off the writing of some of them to the database.

</p><a name="IDX43"></a>
<a name="IDX44"></a>
</dd>
<dt><code> format</code></dt>
<dd>
<p>This allows you to specify format information of a particular field.  Right now only the Date fields support it when
a default value is being converted or if you are using the <code>JAVA_DATE_STRING</code> type.

</p><a name="IDX45"></a>
<a name="IDX46"></a>
</dd>
<dt><code> unique</code></dt>
<dd>
<p>Adds a constraint to the field that it has to be unique across all rows in the table.  This allows you to have a
unique field in the table even though it is not the id field.  For example, you might have an Account class which
has a generated account-id but you also want the email address to be unique across all Accounts.

</p></dd>
</dl>

<hr size="6">
<a name="NOD10"></a>
<a name="SEC9"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC8" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC10" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC7" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.1.2 Using javax.persistence Annotations </h3>

<p>Instead of using the ORMLite annotations (see section <a href="#SEC8">Adding ORMLite Annotations</a>), you can use the more standard
JPA annotations from the <code>javax.persistence</code> package.  In place of the <code>@DatabaseTable</code> annotation, you can
use the <code>javax.persistence</code> <code>@Entity</code> annotation.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@Entity(name = &quot;accounts&quot;)
public class Account {
&hellip;
</pre></td></tr></table>
<p>The <code>@Entity</code> annotations can have an optional <code>name</code> argument which specifies the table name.   If not
specified, the class name all lowercase is used by default.

</p><a name="IDX47"></a>
<a name="IDX48"></a>
<a name="IDX49"></a>
<a name="IDX50"></a>
<a name="IDX51"></a>
<a name="IDX52"></a>
<a name="IDX53"></a>
<a name="IDX54"></a>
<a name="IDX55"></a>
<a name="IDX56"></a>
<p>Instead of using the <code>@DatabaseField</code> annotation on each of the fields, you can use the <code>javax.persistence</code>
annotations: <code>@Column</code>, <code>@Id</code>, <code>@GeneratedValue</code>, <code>@OneToOne</code>, and <code>@ManyToOne</code>. For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@Entity(name = &quot;accounts&quot;)
public class Account {

    @Id
    private String name;

    @Column(nullable = false)
    private String password;
    &hellip;
</pre></td></tr></table>
<p>The following <code>javax.persistence</code> annotations and fields are supported:

</p><dl compact="compact">
<dt><code> @Column</code></dt>
<dd>
<p>Specifies the field to be persisted to the database.  You can also just specify the <code>@Id</code> annotation.  The
following annotation fields are supported, the rest are ignored.

</p><dl compact="compact">
<dt><code> name</code></dt>
<dd>
<p>Used to specify the name of the associated database column.  If not provided then the field name is taken.

</p><a name="IDX57"></a>
<a name="IDX58"></a>
<a name="IDX59"></a>
</dd>
<dt><code> length</code></dt>
<dd>
<p>Specifies the length (or width) of the database field.  Maybe only applicable for Strings and only supported by
certain database types.  Default for those that do is 255.   Same as the <code>width</code> field in the
<code>@DatabaseField</code> annotation.

</p><a name="IDX60"></a>
<a name="IDX61"></a>
</dd>
<dt><code> nullable</code></dt>
<dd>
<p>Set to true to have a field not be able to be inserted into the database with a null value.  Same as the
<code>canBeNull</code> field in the <code>@DatabaseField</code> annotation.

</p><a name="IDX62"></a>
<a name="IDX63"></a>
</dd>
<dt><code> unique</code></dt>
<dd>
<p>Adds a constraint to the field that it has to be unique across all rows in the table.  Same as the
<code>unique</code> field in the <code>@DatabaseField</code> annotation.

</p></dd>
</dl>

<a name="IDX64"></a>
<a name="IDX65"></a>
<a name="IDX66"></a>
</dd>
<dt><code> @Id</code></dt>
<dd>
<p>Used to specify a field to be persisted to the database as a primary row-id.  If you want to have the id be
auto-generated, you will need to also specify the <code>@GeneratedValue</code> annotation.

</p></dd>
<dt><code> @GeneratedValue</code></dt>
<dd>
<p>Used to define an id field as having a auto-generated value.  This is only used in addition to the <code>@Id</code>
annotation.  See the <code>generatedId</code> field in the <code>@DatabaseField</code> annotation for more details.

</p></dd>
<dt><code> @OneToOne or @ManyToOne</code></dt>
<dd>
<p>Fields with these annotations are assumed to be foreign fields.  See section <a href="ormlite_4.html#SEC27">Foreign Object Fields</a>.  ORMLite does
<em>not</em> enforce the many or one relationship nor does it use any of the annotation fields.  It just uses the
existence of either of these annotations to indicate that it is a foreign object.

</p></dd>
</dl>

<p>If the <code>@Column</code> annotation is used on a field that has a unknown type then it is assumed to be a
Serializable field and the object should implement <code>java.io.Serializable</code>.  See <a href="#ANC3">serializable</a>.

</p><hr size="6">
<a name="NOD11"></a>
<a name="SEC10"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC9" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC11" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC7" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.1.3 Adding a No-Argument-Constructor </h3>

<p>After you have added the class and field annotations, you will also need to add a no-argument constructor with
<em>at least</em> package visibility.  When an object is returned from a query, ORMLite constructs the object
using Java reflection and a constructor needs to be called.

</p><table><tr><td>&nbsp;</td><td><pre class="example">Account() {
  	// all persisted classes must define a no-arg constructor
  	// with at least package visibility
}
</pre></td></tr></table>
<p>So your final example Account class with annotations and constructor would look like:

</p><table><tr><td>&nbsp;</td><td><pre class="example">@DatabaseTable(tableName = &quot;accounts&quot;)
public class Account {
	
    @DatabaseField(id = true)
    private String name;
    
    @DatabaseField(canBeNull = false)
    private String password;
    &hellip;

    Account() {
        // all persisted classes must define a no-arg constructor
        // with at least package visibility
    }
    &hellip;
}
</pre></td></tr></table>
<hr size="6">
<a name="NOD12"></a>
<a name="SEC11"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC10" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC12" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.2 Persisted Data Types </h2>

<p>The following Java types can be persisted to the database by ORMLite.  Database specific code
helps to translate between the SQL types and the database specific handling of those types.
See section <a href="#SEC14">Database Type</a>.

</p><dl compact="compact">
<dd>
<a name="IDX67"></a>
</dd>
<dt><code> String (DataType.STRING)</code></dt>
<dd>
<p>Persisted as SQL type VARCHAR.  

</p><a name="IDX68"></a>
</dd>
<dt><code> boolean or Boolean (DataType.BOOLEAN or DataType.BOOLEAN_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type BOOLEAN.

</p><a name="IDX69"></a>
<a name="IDX70"></a>
<a name="IDX71"></a>
</dd>
<dt><code> java.util.Date (DataType.JAVA_DATE, DataType.JAVA_DATE_LONG, or JAVA_DATE_STRING)</code></dt>
<dd>
<p>Persisted as SQL type TIMESTAMP.  This type automatically uses an internal <code>?</code> argument because the string format of it
is unreliable to match the database format.  See section <a href="ormlite_3.html#SEC26">Using Select Arguments</a>.  

</p><p>You can also specify the <code>dataType</code> field to the <code>@DatabaseField</code> annotation as a <code>DataType.JAVA_DATE_LONG</code>
in which case the milliseconds value of the <code>Date</code> will be stored as an LONG.  Or you can use
<code>DataType.JAVA_DATE_STRING</code> in which case the date will be stored as a string in <code>yyyy-MM-dd HH:mm:ss.SSSSSS</code>
format.  You can use the <code>format</code> field in <code>DatabaseField</code> to set the date to another format.

</p><p><em>NOTE:</em> This is a different class from <code>java.sql.Date</code>.

</p><p><em>NOTE:</em> Certain databases only provide seconds resolution so the milliseconds will be 0.

</p><p><em>NOTE:</em> Because of reentrant issues with <code>SimpleDateFormat</code>, synchronization is done
every time a JAVA_DATE_STRING date is converted to/from the database.

</p><a name="IDX72"></a>
</dd>
<dt><code> byte or Byte (DataType.BYTE or DataType.BYTE_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type TINYINT.

</p><a name="IDX73"></a>
</dd>
<dt><code> short or Short (DataType.SHORT or DataType.SHORT_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type SMALLINT.

</p><a name="IDX74"></a>
</dd>
<dt><code> int or Integer (DataType.INTEGER or DataType.INTEGER_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type INTEGER.

</p><a name="IDX75"></a>
</dd>
<dt><code> long or Long (DataType.LONG or DataType.LONG_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type BIGINT.

</p><a name="IDX76"></a>
</dd>
<dt><code> float or Float (DataType.FLOAT or DataType.FLOAT_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type FLOAT.

</p><a name="IDX77"></a>
</dd>
<dt><code> double or Double (DataType.DOUBLE or DataType.DOUBLE_OBJ)</code></dt>
<dd>
<p>Persisted as SQL type DOUBLE.

</p><a name="IDX78"></a>
<a name="IDX79"></a>
<p><a name="ANC3"></a>
</p></dd>
<dt><code> Serializable (DataType.SERIALIZABLE)</code></dt>
<dd>
<p>Persisted as SQL type VARBINARY.  This is a special type that serializes an object as a sequence of bytes
and then deserializes it on the way back.  The field must be an object that implements the <code>java.io.Serializable</code>
interface.  Depending on the database type, there will be limits to the size of the object that can be stored.  YMMV.

</p><p>Some databases place restrictions on this field type that it cannot be the id column in a class.  Other databases do
not allow you to query on this type of field at all.  If your database does support it, you may also have to use a
Select Argument to query for this type.  See section <a href="ormlite_3.html#SEC26">Using Select Arguments</a>.  

</p><a name="IDX80"></a>
<a name="IDX81"></a>
</dd>
<dt><code> enum or Enum (DataType.ENUM_STRING or DataType.ENUM_INTEGER)</code></dt>
<dd>
<p>Persisted by default as the enumerated value's string <em>name</em> as a VARCHAR type.  You can also specify the
<code>dataType</code> field (from the <code>@DatabaseField</code> annotation) as a <code>DataType.ENUM_INTEGER</code> in which case the
<code>ordinal</code> of the enum value will be stored as an INTEGER.  The name is the default (and recommended) because
it allows you to add additional enums anywhere in the list without worrying about having to convert data later.
If you insert (or remove) an enum from the list that is being stored as a number, then old data will be un-persisted
incorrectly.

</p><a name="IDX82"></a>
<p>You can also also specify an <em>unknownEnumName</em> name with the <code>@DatabaseField</code> annotation which will be
used if an unknown value is found in the database. See <a href="#ANC2">unknownEnumName</a>. 

</p></dd>
</dl>

<p><em>NOTE:</em> ORMLite also supports the concept of foreign objects where the id of another object is
stored in the database.  See section <a href="ormlite_4.html#SEC27">Foreign Object Fields</a>.

</p><hr size="6">
<a name="NOD13"></a>
<a name="SEC12"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC11" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC13" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.3 Setting Up the DAOs </h2>

<p>Once you have annotated your classes, you will need to create the DAO class(es).  The pattern that we recommend
is to define an interface which extends the <code>Dao</code> interface and will be used in the code.  The interface
isn't required but it is a good pattern so your code is less tied to JDBC for persistence.  Each DAO has two generic
parameters: the class we are persisting with the DAO, and the class of the ID-column that will be used to
identify a specific database row.  If you class does not have an ID field, you can put <code>Object</code> or <code>Void</code>
as the 2nd argument.  For example, in the above <code>Account</code> class, the &quot;name&quot; field is the ID column (id = true)
so the ID class is <code>String</code>.  Example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">/** Account DAO which has a String id (Account.name) */
public interface AccountDao extends Dao&lt;Account, String&gt; {
    // empty wrapper, you can add additional DAO methods here
}
</pre></td></tr></table>
<p>Here's the example implementation of this interface.

</p><a name="IDX83"></a>
<table><tr><td>&nbsp;</td><td><pre class="example">/** JDBC implementation of the AccountDao interface. */
public class AccountDaoImpl extends BaseDaoImpl&lt;Account, String&gt;
  implements AccountDao {
    public AccountDaoImpl(ConnectionSource connectionSource) throws SQLException {
        super(connectionSource, Account.class);
    }
}
</pre></td></tr></table>
<p>That's all you need to define your DAO classes.  You are free to add more methods to your DAO interfaces and
implementations if there are specific operations that are needed and not provided by the Dao base classes.
More on how to use these DAOs later. See section <a href="#SEC17">DAO Usage</a>.

</p><a name="IDX84"></a>
<p>As mentioned above (see section <a href="ormlite_1.html#SEC4">Configuring a DAO</a>), you are not <em>required</em> to create a DAO class for every one of your persisted
objects. You can use the <code>createDao</code> static method on the <code>BaseDaoImpl</code> class to create a DAO class without having
to define one.

</p><hr size="6">
<a name="NOD14"></a>
<a name="SEC13"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC12" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC14" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.4 JDBC Connection Sources </h2>

<p><em>NOTE:</em> With regards to connection sources, Android users should see the Android specific documentation later in the manual.
See section <a href="ormlite_5.html#SEC28">Using With Android</a>.

</p><a name="IDX85"></a>
<a name="IDX86"></a>
<a name="IDX87"></a>
<a name="IDX88"></a>
<p>To use the database and the DAO objects, you will need to configure what JDBC calls a <code>DataSource</code> (see the
<code>javax.sql.DataSource</code> class).  The <code>DataSource</code> is a factory for connections to the physical SQL
database.  Since ORMLite also supports non-JDBC connections, we use a subset of the <code>DataSource</code>
methods in the <code>ConnectionSource</code> interface so we can support non-JDBC database handlers.  Here is a code example
that creates a simple, single-connection source.

</p><a name="IDX89"></a>
<a name="IDX90"></a>
<table><tr><td>&nbsp;</td><td><pre class="example">// single connection source example
ConnectionSource connectionSource =
  new JdbcConnectionSource(&quot;jdbc:h2:mem:account&quot;);
</pre></td></tr></table>
<a name="IDX91"></a>
<a name="IDX92"></a>
<p>One of the more recent additions (10/2010) to the package is the <code>JdbcPooledConnectionSource</code>.  It is a relatively
simple implementation of a pooled connection source.  As database connections are released, instead of being closed they
are added to an internal list so they can be reallocated at a later time.  New connections are created on demand only if
there are no dormant connections that can be reused.  <code>JdbcPooledConnectionSource</code> is also synchronized and can be
used my multiple threads.  It has settings for the maximum number of free connections before they are closed as well as
a maximum age before a connection is closed.

</p><table><tr><td>&nbsp;</td><td><pre class="example">// single connection source example
JdbcPooledConnectionSource connectionSource =
  new JdbcPooledConnectionSource(&quot;jdbc:h2:mem:account&quot;);
// only keep the connections open for 5 minutes
connectionSource.setMaxConnectionAgeMillis(5 * 60 * 1000);
</pre></td></tr></table>
<a name="IDX93"></a>
<a name="IDX94"></a>
<a name="IDX95"></a>
<a name="IDX96"></a>
<p>There are many other, external data sources that can be used instead, including more robust and probably higher-performance
pooled connection managers. You can instantiate your own directly and wrap it in the <code>DataSourceConnectionSource</code> class
which delegates to it.  Then you set that on the DAOs directly.

</p><a name="IDX97"></a>
<a name="IDX98"></a>
<table><tr><td>&nbsp;</td><td><pre class="example">// basic Apache data source
BasicDataSource dataSource = new BasicDataSource();
dataSource.setUrl(&quot;jdbc:h2:mem:account&quot;);
// we wrap it in the DataSourceConnectionSource
ConnectionSource connectionSource = 
  new DataSourceConnectionSource(dataSource);
</pre></td></tr></table>
<a name="IDX99"></a>
<a name="IDX100"></a>
<p>When you are done with your <code>ConnectionSource</code>, you will want to call a <code>close()</code> method to close any
underlying connections.  Something like the following pattern is recommended.

</p><table><tr><td>&nbsp;</td><td><pre class="example">JdbcConnectionSource connectionSource =
    new JdbcPooledConnectionSource(&quot;jdbc:h2:mem:account&quot;);
try {
    // work with the data-source and DAOs
    &hellip;
} finally {
    connectionSource.close();
}
</pre></td></tr></table>
<p>Unfortunately, the <code>DataSource</code> interface does not have a close method so you will have to close the <code>DataSource</code>
by hand - the <code>close()</code> method on the <code>DataSourceConnectionSource</code> does <em>nothing</em>.

</p><hr size="6">
<a name="NOD15"></a>
<a name="SEC14"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC13" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC15" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.5 Database Type </h2>

<p>ORMLite uses an internal <code>DatabaseType</code> object which defines all of the per-database information necessary
to support the various features on all of the different database types.  The <code>JdbcConnectionSource</code> uses the database
URL to pick the correct <code>DatabaseType</code>.  If it picks an incorrect one then you may need to set the <code>DatabaseType</code>
on the connection source <em>directly</em>.  For example:

</p><table><tr><td>&nbsp;</td><td><pre class="example">String databaseUrl = &quot;jdbc:derby://dbserver1:1527/&quot;;
DatabaseType databaseType = new DerbyClientServerDatabaseType();
ConnectionSource connectionSource =
   new JdbcConnectionSource(databaseUrl, databaseType);
</pre></td></tr></table>
<p>Android users do not need to worry about this because the <code>AndroidConnectionSource</code> always uses the
<code>SqliteAndroidDatabaseType</code>.  See section <a href="ormlite_5.html#SEC28">Using With Android</a>.

</p><p>For more information about the database specific code in the DatabaseType see later in the manual.  See section <a href="ormlite_7.html#SEC36">Database Specific Code</a>.

</p><hr size="6">
<a name="NOD16"></a>
<a name="SEC15"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC14" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC16" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.6 Supported Databases </h2>

<p>ORMLite supports the following database flavors.  Some of them have some specific documentation that needs to be obeyed.

</p><dl compact="compact">
<dd>
<a name="IDX101"></a>
</dd>
<dt> MySQL</dt>
<dd>
<p>Tables are created in MySQL with the InnoDB engine by default using <code>CREATE TABLE ... ENGINE=InnoDB</code>.  If you want to use
another engine, you can instantiate the <code>MysqlDatabaseType</code> directly and use the <code>setCreateTableSuffix()</code> method to use
the default or another engine.  Also, MySQL does some funky stuff with the last-modification time if a <code>Date</code> is defined as a
<code>TIMESTAMP</code> so <code>DATETIME</code> was used instead.

</p><a name="IDX102"></a>
</dd>
<dt> Postgres</dt>
<dd>
<a name="IDX103"></a>
<a name="IDX104"></a>
</dd>
<dt> Microsoft SQL Server</dt>
<dd>
<a name="IDX105"></a>
</dd>
<dt> H2</dt>
<dd>
<a name="IDX106"></a>
</dd>
<dt> Derby</dt>
<dd>
<p>There are two drivers for Derby: one embedded and one client/server.  ORMLite makes an attempt to detect the right driver but you
may have to set the right database type on your ConnectionSource directly if it doesn't.  See section <a href="#SEC14">Database Type</a>.

</p><a name="IDX107"></a>
</dd>
<dt> HSQLDB</dt>
<dd>
<a name="IDX108"></a>
</dd>
<dt> SQLite</dt>
<dd>
<p>There are multiple SQLite drivers out there.  Make sure you use the Xerial one (<a href="http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC">http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC</a>)
and not the Zentus one (<a href="http://www.zentus.com/sqlitejdbc/">http://www.zentus.com/sqlitejdbc/</a>) which does not support generated ids.

</p><a name="IDX109"></a>
</dd>
<dt> Android SQLite</dt>
<dd>
<p>Android's SQLite database is accessed through direct calls to the Android database API methods.

</p><a name="IDX110"></a>
</dd>
<dt> DB2</dt>
<dd>
<p>I do not have access to an DB2 database so I cannot run any tests to make sure that my support for it works well.  Please contact me if you have
an Oracle database that I can develop against.

</p><a name="IDX111"></a>
</dd>
<dt> Oracle</dt>
<dd>
<p>I do not have access to an Oracle database so I cannot run any tests to make sure that my support for it works well.  Please contact me if you have
an Oracle database that I can develop against.

</p></dd>
</dl>

<a name="IDX112"></a>
<p>Please contact the author if your database is not supported.

</p><hr size="6">
<a name="NOD17"></a>
<a name="SEC16"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC15" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC17" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.7 Tying It All Together </h2>

<p>So you have annotated the objects to be persisted, added the no-arg constructor, defined your DAO classes,
created your <code>DataSource</code>, and established your <code>DatabaseType</code>.  You are ready to start persisting and
querying your database objects.  The following code ties it all together:

</p><table><tr><td>&nbsp;</td><td><pre class="example">// h2 by default but change to match your database
String databaseUrl = &quot;jdbc:h2:mem:account&quot;;
JdbcConnectionSource connectionSource =
  new JdbcConnectionSource(databaseUrl);

// instantiate the dao
AccountDaoImpl accountDao = new AccountDaoImpl(connectionSource);

// if you need to create the 'accounts' table make this call
TableUtils.createTable(connectionSource, Account.class);

// create an instance of Account
Account account = new Account(&quot;Jim Coakley&quot;);

// persist the account object to the database
// it should return 1 for the 1 row inserted
if (accountDao.create(account) != 1) {
  // error handling &hellip; 
}
// other code &hellip;

// destroy the data source which should close underlying connections
connectionSource.destroy();
</pre></td></tr></table>
<a name="IDX113"></a>
<p>For more examples, see the <code>com.j256.ormlite.examples</code> package test classes in the Java -jdbc sources jar.

</p><hr size="6">
<a name="NOD18"></a>
<a name="SEC17"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC16" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC18" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.8 DAO Usage </h2>


<p>The following database operations are easily accomplished by using the DAO classes:

</p><dl compact="compact">
<dd>
<a name="IDX114"></a>
<a name="IDX115"></a>
<a name="IDX116"></a>
<a name="IDX117"></a>
</dd>
<dt> create and persist an object to the database</dt>
<dd>
<p>This inserts a new row to the database table associated with the object.

</p><table><tr><td>&nbsp;</td><td><pre class="example">Account account = new Account();
account.name = &quot;Jim Coakley&quot;;
// only 1 row should have been affected
if (accountDao.create(account) != 1) {
  // error handling &hellip; 
}
</pre></td></tr></table>
<a name="IDX118"></a>
</dd>
<dt> query for it's id column </dt>
<dd>
<p>If the object has an id field defined by the annotations, then we can lookup an object in the database using its id.

</p><table><tr><td>&nbsp;</td><td><pre class="example">Account account = accountDao.queryForId(name);
if (account == null) {
  account not found handling &hellip; 
}
</pre></td></tr></table>
<a name="IDX119"></a>
</dd>
<dt> update the database row associated with the object</dt>
<dd>
<p>If you change fields in an object in memory, you must call update to persist those changes to the database.  This
also requires an id field. 

</p><table><tr><td>&nbsp;</td><td><pre class="example">account.password = &quot;_secret&quot;;
// 1 row should be updated
if (accountDao.update(account) != 1) {
  // error handling &hellip; 
}
</pre></td></tr></table>
<a name="IDX120"></a>
</dd>
<dt> refreshing our object if the database has changed</dt>
<dd>
<p>If some other entity has changed a row the database corresponding to an object in memory, you will need to refresh that
object to get the memory object up-to-date.  This also requires an id field. 

</p><table><tr><td>&nbsp;</td><td><pre class="example">// 1 row should be found
if (accountDao.refresh(account) != 1) {
  // error handling &hellip; 
}
</pre></td></tr></table>
<a name="IDX121"></a>
</dd>
<dt> delete the account from the database</dt>
<dd>
<p>Removes the row that corresponds to the object from the database.  Once the object has been deleted from the database,
you can continue to use the object in memory but any update or refresh calls will fail.  This also requires an id field.

</p><table><tr><td>&nbsp;</td><td><pre class="example">// 1 row should be affected
if (accountDao.delete(account) != 1) {
  // error handling &hellip; 
}
</pre></td></tr></table>
<a name="IDX122"></a>
<a name="IDX123"></a>
</dd>
<dt> iterate through all of the rows in a table:</dt>
<dd>
<p>The DAO is also an iterator so you can easily run through all of the rows in the database:

</p><table><tr><td>&nbsp;</td><td><pre class="example">// page through all of the accounts in the database
for (Account account : accountDao) {
    System.out.println(account.getName());
}
</pre></td></tr></table>
<a name="IDX124"></a>
<p><em>NOTE:</em> you must page through <em>all</em> items for the iterator to close the underlying SQL object.   If you don't
go all of the way, the garbage collector will close the SQL statement some time later which is considered bad form.

</p></dd>
</dl>

<hr size="6">
<a name="NOD19"></a>
<a name="SEC18"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC17" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC19" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC6" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section"> 2.9 Identity Columns </h2>

<p>Database rows are identified by a particular column which is defined as the <em>identity</em> column.  This can either be
supplied by the user or auto-generated by the database.  Identity columns have unique values for every row in the table
and they are required if you want to delete, refresh, or update a particular row using the DAO.  To configure a field as
an identity field, you should use one (and only one) of the following three settings from <code>@DatabaseField</code>:
<code>id</code>, <code>generatedId</code>, or <code>generatedIdSequence</code>.

</p><table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#SEC19">2.9.1 Fields With id</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                        Using fields with id = true.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC20">2.9.2 Fields With generatedId</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Using fields with generatedId = true.
</td></tr>
<tr><td align="left" valign="top"><a href="#SEC21">2.9.3 Fields With generatedIdSequence</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Using fields with generatedIdSequence = ...
</td></tr>
</table>

<hr size="6">
<a name="NOD20"></a>
<a name="SEC19"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC18" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC20" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC18" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.9.1 Fields With id </h3>

<p>With our <code>Account</code> example class, the string <code>name</code> field has been marked with <code>id = true</code>.  This means
that the <code>name</code> is the identity column for the object.  Each account stored in the database must have a unique
value for the <code>name</code> field - you cannot have two rows with the name &quot;John Smith&quot;.

</p><table><tr><td>&nbsp;</td><td><pre class="example">public class Account {
    @DatabaseField(id = true)
    private String name;
    &hellip;
}
</pre></td></tr></table>
<p>When you use the DAO to lookup an account with a particular name, you will use the identity field to locate the
<code>Account</code> object in the database:

</p><table><tr><td>&nbsp;</td><td><pre class="example">Account account = accountDao.queryForId(&quot;John Smith&quot;);
if (account == null) {
    // the name &quot;John Smith&quot; does not match any rows
}
</pre></td></tr></table>
<a name="IDX125"></a>
<a name="IDX126"></a>
<a name="IDX127"></a>
<p>If you need to change the value of an object's id field, you must use the <code>Dao.updateId()</code> method which takes the
current object still with its <em>old</em> id value and the new value.  ORMLite has to first locate the object
by its old id and then update it with the new id.  See <a href="ormlite_7.html#ANC6">updateId</a>.

</p><hr size="6">
<a name="NOD21"></a>
<a name="SEC20"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC19" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC21" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC18" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.9.2 Fields With generatedId </h3>

<p>You can configure a long or integer field to be a <em>generated</em> identity column.  The id number column for each row
will then be automatically generated by the database.  

</p><table><tr><td>&nbsp;</td><td><pre class="example">public class Order {
    @DatabaseField(generatedId = true)
    private int id;
    &hellip;
}
</pre></td></tr></table>
<p>When an <code>Order</code> object is passed to <code>create</code> and stored to the database, the generated identity value is returned
by the database and set on the object by ORMLite.  In the majority of database types, the generated value starts at
1 and increases by 1 every time a new row is inserted into the table.

</p><table><tr><td>&nbsp;</td><td><pre class="example">// build our order object without and id
Order order = new Order(&quot;Jim Sanders&quot;, 12.34);
&hellip;
if (orderDao.create(order) != 1) {
   // error handling unless 1 row was inserted
}
System.out.println(&quot;Order id &quot; + order.getId() + &quot; was persisted to the database&quot;);
// query for the order with an id of 1372
order = orderDao.queryForId(1372);
if (order == null) {
    // none of the order rows have an id of 1372
}
</pre></td></tr></table>
<p>In the above code example, an order is constructed with name and amount (for example).  When it is passed to the DAO's
<code>create</code> method, the id field has not been set.  After it has been saved to the database, the generated-id will
be set on the id field by ORMLite and will be available when <code>getId()</code> is called on the order after the
<code>create</code> method returns.

</p><p><em>NOTE:</em> Depending on the database type, you may not be able to change the value of an auto-generated id field.

</p><hr size="6">
<a name="NOD22"></a>
<a name="SEC21"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC20" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#SEC18" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection"> 2.9.3 Fields With generatedIdSequence </h3>


<p>Some databases use what's called a sequence number generator to provide the generated id value.  If you use
<code>generatedId = true</code> with those databases, a sequence name will be auto-generated by ORMLite.
If, however, you need to set the name of the sequence to match existing schema, you can used the
<code>generatedIdSequence</code> value which takes a string name for the sequence.

</p><table><tr><td>&nbsp;</td><td><pre class="example">public class Order {
    @DatabaseField(generatedIdSequence = &quot;order_id_seq&quot;)
    private int id;
    &hellip;
}
</pre></td></tr></table>
<p>In the above example, the <code>id</code> value is again automatically generated but using a sequence with the name
<code>order_id_seq</code>.  This will throw an exception if you are working with a database which does not support
sequences.

</p><p><em>NOTE:</em> Depending on the database type, you may not be able to change the value of an auto-generated id field.

</p><hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC6" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="ormlite_3.html#SEC22" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="ormlite.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_9.html#SEC41" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="ormlite_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>Gray Watson</em> on <em>November, 17 2010</em> using <a href="http://texi2html.cvshome.org/"><em>texi2html 1.70</em></a>.
 </font>
 <br>

</p>
</body>
</html>
